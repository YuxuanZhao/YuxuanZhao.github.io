<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Eason Chiu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Eason Chiu">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Eason Chiu">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Eason Chiu">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Eason Chiu" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Eason Chiu</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-frontend-interview-Q-A" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/07/frontend-interview-Q-A/" class="article-date">
  <time datetime="2020-08-07T04:05:11.000Z" itemprop="datePublished">2020-08-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/07/frontend-interview-Q-A/">frontend interview Q&amp;A</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="原始值和引用值类型及区别"><a href="#原始值和引用值类型及区别" class="headerlink" title="原始值和引用值类型及区别"></a>原始值和引用值类型及区别</h2><p>原始值是存储在<strong>栈</strong>中的简单数据段，即他们的<strong>值</strong>直接存储在变量访问的位置。引用值是存储在<strong>堆</strong>中的对象，即存储在变量处的值是一个<strong>指针</strong>。对于原始变量的传递不会改变原始变量本身，而对于引用值的传递则是复制指针，对于变量改变的影响会传递到每一个引用值上。</p>
<h2 id="判断数据类型-typeof-instanceof-Object-prototype-toString"><a href="#判断数据类型-typeof-instanceof-Object-prototype-toString" class="headerlink" title="判断数据类型 typeof/ instanceof/ Object.prototype.toString"></a>判断数据类型 typeof/ instanceof/ Object.prototype.toString</h2><ol>
<li>typeof可以返回数据类型，检查undefined也不会报错（typeof v === “undefined”）。缺点：typeof不能区分数组和对象，数组会被视为一种特殊的对象。null被认定为空的对象。但是instanceof可以区分数组和对象（var a = []; a instanceof Array）</li>
<li>instanceof是检查右边的构造函数的prototype是否在左边对象的prototype link，所以v instanceof Vehicle 等同 Vehicle.prototype.isPrototypeOf(v)。缺点：只能用于对象，不能用于原始类型的值。null不会被认为是object。</li>
<li>Object.prototype.toString，使用Object.prototype.toString.call(‘123’) 能够使检查所有的东西，包括函数</li>
</ol>
<h2 id="类数组与数组的区别与转换"><a href="#类数组与数组的区别与转换" class="headerlink" title="类数组与数组的区别与转换"></a>类数组与数组的区别与转换</h2><p>类数组对象其实就是指一些虽然不能直接调用数组方法，并且也不能对他们的length属性做出什么特殊行为，但是那些针对数组的代码依然能在他们的身上完美的发挥效用的对象，就像针对真正的数组运行一样。在JS中 Arguments就是一个经典的类数组对象。数组不同于其他对象的一些特性：</p>
<ol>
<li>有新元素加入的时候，会自动更新length属性</li>
<li>可以通过设置length属性来对数组进行分割</li>
<li>从Array.prototype中继承了有用的方法</li>
<li>其类属性为Array</li>
</ol>
<h2 id="JavaScript数组API汇总"><a href="#JavaScript数组API汇总" class="headerlink" title="JavaScript数组API汇总"></a>JavaScript数组API汇总</h2><ol>
<li><p>push() 添加value到数组的最后，返回新数组的长度</p>
</li>
<li><p>unshift() 添加value到数组的开头</p>
</li>
<li><p>pop() 删除数组中最后一个元素</p>
</li>
<li><p>shift() 删除数组第一个元素</p>
</li>
<li><p>join(value) 用value连接每一个元素成一个新的string</p>
</li>
<li><p>reverse() 反转数组</p>
</li>
<li><p>slice(start, end) 获取子数组</p>
</li>
<li><p>splice(index, count, value1, value2….) 从索引位index处删除count个元素，插入value1, value2等元素，返回被删除的元素组成的新数组(改变原数组)</p>
</li>
<li><p>sort() 排序</p>
</li>
<li><p>toString()：将数组中的元素用逗号拼接成字符串</p>
</li>
<li><p>indexOf(value) 检查数组中是否存在value，有就反悔匹配到的第一个index，没有就返回-1</p>
</li>
<li><p>lastIndexOf(value) 同样的，只不过从后往前来遍历</p>
</li>
<li><p>a.concat(b) 返回新的连接好的数组</p>
</li>
<li><p>arr.forEach(function (item, index, a) {}) 遍历arr，得到item，index，和数组本身</p>
</li>
<li><p>var arr1 = arr.map(function (item, index, a) {return item * item})对数组中每一项运行函数，得到新的数组（这里就是把每一项变成平方）</p>
</li>
<li><p>var arr1 = arr.filter(function (item, index, a) {return index % 3 === 0 || item &gt;= 8}) 对数组中的每一项运行指定函数，返回满足条件的项目组成的数组var arr1 = arr.filter(function (item, index, a) {return index % 3 === 0 || item &gt;= 8})（这里是满足index是三的倍数或者item的大小是大于等于8）</p>
</li>
<li><p>var arr1 = arr.every(function (item, index, a) {return item &lt; 10})判断每一项都满足条件才返回true</p>
</li>
<li><p>var arr1 = arr.some(function (item, index, a) {return item &lt; 3})类似的，存在一项就返回true</p>
</li>
<li><p>reduce</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//reduce: 把每一项相加，从10开始（即+10）</span></span><br><span class="line"><span class="keyword">var</span> result1 = arr.reduce(<span class="function">(<span class="params">previousValue, currentValue, index, arr</span>) =&gt;</span> &#123;<span class="keyword">return</span> previousValue + currentValue&#125;，<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">&#x27;fs&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> output = fs.readFileSync(<span class="string">&#x27;data.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>) <span class="comment">//以utf8 mapping来读取这个txt文件</span></span><br><span class="line">.trim() <span class="comment">//切掉string末尾的所有空格</span></span><br><span class="line">.split(<span class="string">&#x27;\n&#x27;</span>) <span class="comment">//以换行符分成一个array，这个array里面的每一个item都是一行string</span></span><br><span class="line">.map(<span class="function"><span class="params">line</span> =&gt;</span> line.split(<span class="string">&#x27;\t&#x27;</span>)) <span class="comment">//把每一行的内容按tab分开，放到子array里面</span></span><br><span class="line">.reduce(<span class="function">(<span class="params">customers, line</span>) =&gt;</span> &#123;<span class="comment">//类似地，customers就是已经保存的object，line就是现在读取到的item</span></span><br><span class="line">  customers[line[<span class="number">0</span>]] = customers[line[<span class="number">0</span>]] || [] <span class="comment">//如果customers[name]已经存在，沿用它，没有就创建一个新的array</span></span><br><span class="line">  customers[line[<span class="number">0</span>]].push(&#123;</span><br><span class="line">    name: line[<span class="number">1</span>],</span><br><span class="line">    price: line[<span class="number">2</span>],</span><br><span class="line">    quantity: line[<span class="number">3</span>]</span><br><span class="line">  &#125;) <span class="comment">//往customers[name]加入新的object</span></span><br><span class="line">  <span class="keyword">return</span> customers <span class="comment">//每次reduce都把保存的obejct customers返回出来</span></span><br><span class="line">&#125;, &#123;&#125;)<span class="comment">//这里不用数字，而使用一个空object指示</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="bind、call、apply的区别"><a href="#bind、call、apply的区别" class="headerlink" title="bind、call、apply的区别"></a>bind、call、apply的区别</h2><p>call 其实改变的是绑定在方法上作用的this，如果call方法没有参数，或者参数为<strong>null或undefined</strong>，则等同于指向<strong>全局对象</strong>。例子如下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.color = <span class="string">&quot;red&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> o = &#123;<span class="attr">color</span>: <span class="string">&quot;blue&quot;</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayColor</span>(<span class="params"></span>)</span>&#123; alert(<span class="built_in">this</span>.color); &#125;</span><br><span class="line">sayColor();<span class="comment">//red</span></span><br><span class="line">sayColor.call(<span class="built_in">this</span>);<span class="comment">//red</span></span><br><span class="line">sayColor.call(<span class="built_in">window</span>);<span class="comment">//red</span></span><br><span class="line">sayColor.call(o);<span class="comment">//blue</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(arr); <span class="comment">// [object Array]</span></span><br><span class="line">把函数体<span class="built_in">Object</span>.prototype.toString()方法内部的<span class="built_in">this</span>，绑到arr的执行环境（作用域）</span><br></pre></td></tr></table></figure>

<p>apply 与 call 最大的区别在于第二个参数是一个数组<br>bind，ES5 新增的方法：它是创建的一个新函数，我们需要在合适的时候手动去调用这个新函数，apply 和 call 都是马上执行的。</p>
<h2 id="new-关键字会进行如下的操作"><a href="#new-关键字会进行如下的操作" class="headerlink" title="new 关键字会进行如下的操作"></a>new 关键字会进行如下的操作</h2><pre><code>7. 创建一个空的简单JavaScript对象（即&#123;&#125;）

8. 链接该对象（即设置该对象的构造函数）到另一个对象 

9. 将步骤1新创建的对象作为this的上下文 

10. 如果该函数没有返回对象，则返回this</code></pre>
<h2 id="如何正确判断this"><a href="#如何正确判断this" class="headerlink" title="如何正确判断this"></a>如何正确判断this</h2><p>每个函数的<code>this</code>并不是在声明时就被绑定的，而是在调用时被绑定。函数被直接调用时，就相当于全局对象调用的；这样它的 <code>this</code>就指向全局对象：<code>window</code>；在ES6中，新加入了箭头函数，它和普通函数最不同的一点就是，对于箭头函数的this指向，只需要看它是在哪里创建即可。</p>
<h2 id="闭包（closure）"><a href="#闭包（closure）" class="headerlink" title="闭包（closure）"></a>闭包（closure）</h2><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//makeAdder 是一个函数工厂</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeAdder</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">y</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> x + y;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//定义x来创建了两个新函数，本身x就是公开的</span></span><br><span class="line"><span class="keyword">var</span> add5 = makeAdder(<span class="number">5</span>);   <span class="comment">//一个是加5的函数</span></span><br><span class="line"><span class="keyword">var</span> add10 = makeAdder(<span class="number">10</span>); <span class="comment">//一个是加10的函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//y是作用域内部的变量，通过return function使得用户可以访问</span></span><br><span class="line"><span class="built_in">console</span>.log(add5(<span class="number">2</span>));  <span class="comment">// 2 + 5 = 7</span></span><br><span class="line"><span class="built_in">console</span>.log(add10(<span class="number">2</span>)); <span class="comment">// 2 + 10 = 12</span></span><br></pre></td></tr></table></figure>

<p>JavaScript是单线程的，执行上下文（context 作用域）的存放是放在stack（栈）里面的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">books</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> book = <span class="string">&quot;secret name&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> book;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bag = books();</span><br><span class="line"><span class="keyword">var</span> bookName = bag();</span><br></pre></td></tr></table></figure>

<p>闭包的意义？可以在作用域外部访问作用域内部的变量，在全局范围内都有权引用函数的变量了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注意一个知识点，在Javascript里面的for循环里面的var i可以在外部访问到，如果要声明这个变量只能在函数内部被访问的话，只需要改成let i就行</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span> (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">//setTimeout是一个Windows对象的方法，在运行完执行栈之后指定的毫秒数后调用函数或者计算表达式，这里是4秒，才开始运行任务队列</span></span><br><span class="line">    <span class="comment">//匿名函数可以访问到外部的变量i，因为它在创建自己的执行上下文的时候，会创建相应的作用域链和变量对象</span></span><br><span class="line">    <span class="built_in">console</span>.log(i++);</span><br><span class="line">  &#125;, <span class="number">4000</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i);</span><br><span class="line"><span class="comment">//这个会变成5 5 6 7 8 9，为啥i++在5的基础上还是输出5呢？i++ vs ++i：在于i++显示的值是i，++i显示的值是i+1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//这里有一个JS的知识点，就是用括号包着一个function + 形参，第二个括号包着实参</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(x);</span><br><span class="line">        &#125;,<span class="number">4000</span>);</span><br><span class="line">    &#125;)(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> data = [];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> k = <span class="number">0</span>; k &lt; <span class="number">3</span>; k++)&#123;</span><br><span class="line">  data[k] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(k);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">data[<span class="number">0</span>]();</span><br><span class="line">data[<span class="number">1</span>]();</span><br><span class="line">data[<span class="number">2</span>]();</span><br><span class="line"><span class="comment">//输出3 3 3，因为data[]里面的item只是一个匿名方程而已，这个方程在调用的时候，k已经是3了</span></span><br></pre></td></tr></table></figure>

<p>经典面试题</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//javascript function</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//另一种写法，function name 写成了 var name</span></span><br><span class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//马上执行</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;)(<span class="number">10</span>, <span class="number">20</span>);</span><br></pre></td></tr></table></figure>

<h2 id="基于原型链的继承"><a href="#基于原型链的继承" class="headerlink" title="基于原型链的继承"></a>基于原型链的继承</h2><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.a = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">this</span>.b = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> o = <span class="keyword">new</span> f();</span><br><span class="line"></span><br><span class="line"><span class="comment">//在f函数的原型上定义属性</span></span><br><span class="line">f.prototype.b = <span class="number">3</span>;</span><br><span class="line">f.prototype.c = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 原型链 &#123;a:1, b:2&#125; -&gt; &#123;b:3, c:4&#125; -&gt; Object.prototype -&gt; null</span></span><br><span class="line"><span class="built_in">console</span>.log(o.a); <span class="comment">//1，是o自身的性质</span></span><br><span class="line"><span class="built_in">console</span>.log(o.b); <span class="comment">//2，是o自身的性质，会挡到原型的b属性的表示：property shadowing</span></span><br><span class="line"><span class="built_in">console</span>.log(o.c); <span class="comment">//4，是o原型上的属性</span></span><br><span class="line"><span class="built_in">console</span>.log(o.d); <span class="comment">//undefined，沿着原型链一直找，招=找到null之后返回undefined</span></span><br></pre></td></tr></table></figure>

<h2 id="proto-vs-prototype"><a href="#proto-vs-prototype" class="headerlink" title="__proto__ vs prototype"></a><code>__proto__</code> vs <code>prototype</code></h2><p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/34183746">https://www.zhihu.com/question/34183746</a></p>
<p>一个是隐式原型（ES5中有了对于这个内置属性标准的Get方法Object.getPrototypeOf()，隐式原型指向<strong>创建</strong>这个对象的函数(constructor)的prototype），一个是显式原型（每一个函数在创建之后都会拥有一个名为prototype的属性，这个属性指向函数的原型对象。）</p>
<h2 id="分号"><a href="#分号" class="headerlink" title="分号"></a>分号</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="comment">//JavaScript帮我们在这个位置加上了；结果就是返回了undefined</span></span><br><span class="line">  &#123;</span><br><span class="line">    i=<span class="number">1</span> <span class="comment">//这里想要的是一个object，但是object应该是 i:1，像是查阅字典的那种感觉，=是错的</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>javascript需要每一行都由分号结尾，但是如果你没加分号，Javascript也不会报错而是帮你加上分号。</p>
<h2 id="VS"><a href="#VS" class="headerlink" title="== VS ==="></a>== VS ===</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;</span> == <span class="string">&quot;0&quot;</span> <span class="comment">// false</span></span><br><span class="line"><span class="number">0</span> == <span class="string">&quot;&quot;</span> <span class="comment">// true</span></span><br><span class="line"><span class="number">0</span> == <span class="string">&quot;0&quot;</span> <span class="comment">// true</span></span><br><span class="line"><span class="literal">false</span> == <span class="string">&quot;false&quot;</span> <span class="comment">// false</span></span><br><span class="line"><span class="literal">false</span> == <span class="string">&quot;0&quot;</span> <span class="comment">// true</span></span><br><span class="line"><span class="literal">false</span> == <span class="literal">undefined</span> <span class="comment">// false</span></span><br><span class="line"><span class="literal">false</span> == <span class="literal">null</span> <span class="comment">// false</span></span><br><span class="line"><span class="literal">null</span> == <span class="literal">undefined</span> <span class="comment">// true</span></span><br><span class="line"><span class="string">&quot; \t\r\n&quot;</span> == <span class="number">0</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>最好在任何情况下都使用 === 精确判断并将不同类型的值转化成相同类型的值</p>
<h2 id="继承的实现方式及比较"><a href="#继承的实现方式及比较" class="headerlink" title="继承的实现方式及比较"></a>继承的实现方式及比较</h2><p>子类实例共享属性，所以实例间的属性会互相影响</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = [<span class="string">&#x27;super1&#x27;</span>]</span><br><span class="line">  <span class="built_in">this</span>.reName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name.push(<span class="string">&#x27;super111&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child1</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="comment">//=1. 原型继承=</span></span><br><span class="line">Child1.prototype = <span class="keyword">new</span> Parent1();</span><br><span class="line"><span class="comment">//============</span></span><br><span class="line"><span class="keyword">var</span> child11 = <span class="keyword">new</span> Child1();</span><br><span class="line"><span class="keyword">var</span> child12 = <span class="keyword">new</span> Child1();</span><br><span class="line"><span class="keyword">var</span> parent1 = <span class="keyword">new</span> Parent1();</span><br><span class="line">child11.reName();</span><br><span class="line"><span class="comment">//child11.name === child12.name 共享同一个实例</span></span><br><span class="line"><span class="comment">//child11.reName === child12.reName 共享父类的方法</span></span><br></pre></td></tr></table></figure>

<p>父类的方法没有被共享，内存浪费</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//=2.构造函数继承=</span></span><br><span class="line">  Parent1.call(<span class="built_in">this</span>);</span><br><span class="line">  <span class="comment">//==============</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> child21 = <span class="keyword">new</span> Child2();</span><br><span class="line"><span class="keyword">var</span> child22 = <span class="keyword">new</span> Child2();</span><br><span class="line">child21.reName();</span><br><span class="line"><span class="comment">//child11.name !== child12.name 子实例的属性独立</span></span><br><span class="line"><span class="comment">//child11.reName !== child12.reName 实例方法独立</span></span><br></pre></td></tr></table></figure>

<p>父类构造函数调用两次，子类实例属性存在两份，内存浪费</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent3</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = [<span class="string">&#x27;super3&#x27;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//=3. 组合继承=(1. this -&gt; Parent3.prototype)</span></span><br><span class="line">Parent3.prototype.reName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name.push(<span class="string">&#x27;super31&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//=========</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child3</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  Parent3.call(<span class="built_in">this</span>);<span class="comment">//2.</span></span><br><span class="line">&#125;</span><br><span class="line">Child3.prototype = <span class="keyword">new</span> Parent3();<span class="comment">//3.</span></span><br><span class="line"><span class="keyword">var</span> child31 = <span class="keyword">new</span> Child3();</span><br><span class="line"><span class="keyword">var</span> child32 = <span class="keyword">new</span> Child3();</span><br><span class="line">child31.reName();</span><br><span class="line"><span class="comment">//child11.name !== child12.name 子实例的属性独立</span></span><br><span class="line"><span class="comment">//child11.reName === child12.reName 共享父类的方法</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent4</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = [<span class="string">&#x27;super4&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//=寄生继承=</span></span><br><span class="line">Parent4.prototype.reName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name.push(<span class="string">&#x27;super41&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child4</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  Parent4.call(<span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">Child4.prototype = <span class="built_in">Object</span>.create(Parent4.prototype);</span><br><span class="line"><span class="keyword">var</span> child41 = <span class="keyword">new</span> Child4();</span><br><span class="line"><span class="keyword">var</span> child42 = <span class="keyword">new</span> Child4();</span><br><span class="line">child41.reName();</span><br><span class="line"><span class="comment">//child11.name !== child12.name 子实例的属性独立</span></span><br><span class="line"><span class="comment">//child11.reName === child12.reName 共享父类的方法</span></span><br></pre></td></tr></table></figure>

<h2 id="深拷贝与浅拷贝"><a href="#深拷贝与浅拷贝" class="headerlink" title="深拷贝与浅拷贝"></a>深拷贝与浅拷贝</h2><p>浅拷贝是创建一个新对象，这个对象有着原始对象属性值的一份精确拷贝。如果属性是基本类型，拷贝的就是基本类型的值，如果属性是引用类型，拷贝的就是内存地址 ，所以如果其中一个对象改变了这个地址，就会影响到另一个对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Object.assign()</span></span><br><span class="line"><span class="keyword">let</span> obj1 = &#123; <span class="attr">person</span>: &#123;<span class="attr">name</span>: <span class="string">&quot;kobe&quot;</span>, <span class="attr">age</span>: <span class="number">41</span>&#125;,<span class="attr">sports</span>:<span class="string">&#x27;basketball&#x27;</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> obj2 = <span class="built_in">Object</span>.assign(&#123;&#125;, obj1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数库lodash的_.clone</span></span><br><span class="line"><span class="keyword">var</span> _ = <span class="built_in">require</span>(<span class="string">&#x27;lodash&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> obj2 = _.clone(obj1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//展开运算符</span></span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;... obj1&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Array.prototype.concat()/ Array.prototype.slice()</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">3</span>, &#123;</span><br><span class="line">    username: <span class="string">&#x27;kobe&#x27;</span></span><br><span class="line">    &#125;];</span><br><span class="line"><span class="keyword">let</span> arr2 = arr.concat();    </span><br><span class="line"><span class="keyword">let</span> arr3 = arr.slice();</span><br></pre></td></tr></table></figure>

<p>深拷贝是将一个对象从内存中完整的拷贝一份出来,从堆内存中开辟一个新的区域存放新对象,且修改新对象不会影响原对象。<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000020255831">https://segmentfault.com/a/1190000020255831</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">3</span>, &#123;</span><br><span class="line">    username: <span class="string">&#x27; kobe&#x27;</span></span><br><span class="line">&#125;];</span><br><span class="line"><span class="keyword">let</span> arr4 = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(arr));</span><br><span class="line"><span class="comment">//1. 对于数组和对象可以深拷贝，不能处理函数（null）和正则（空对象）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _ = <span class="built_in">require</span>(<span class="string">&#x27;lodash&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> obj2 = _.cloneDeep(obj1);</span><br><span class="line"><span class="comment">//2. lodash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">&#x27;jquery&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> obj2 = $.extend(<span class="literal">true</span>, &#123;&#125;, obj1);</span><br><span class="line"><span class="comment">//3. jQuery</span></span><br></pre></td></tr></table></figure>

<h2 id="防抖-VS-节流"><a href="#防抖-VS-节流" class="headerlink" title="防抖 VS 节流"></a>防抖 VS 节流</h2><p>防抖（debounce）和节流（throttle）都是在n秒内只能执行一次，区别在于，防抖是如果在n秒内还有执行的话，那么会重新开始算，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(debounce(biu,<span class="number">500</span>),<span class="number">1000</span>)<span class="comment">//每秒运行一次</span></span><br><span class="line"><span class="built_in">setInterval</span>(debounce(boom,<span class="number">2000</span>),<span class="number">1000</span>)<span class="comment">//不运行，因为每一秒请求运行一次，但是n=2，所以被封了</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">setInterval</span>(throttle(biubiu,<span class="number">1000</span>),<span class="number">10</span>) <span class="comment">//每一秒运行一次，不能运行多次，不会清零timer</span></span><br></pre></td></tr></table></figure>

<h2 id="作用域和作用域链"><a href="#作用域和作用域链" class="headerlink" title="作用域和作用域链"></a>作用域和作用域链</h2><p>查找变量的时候：从当前上下文开始，逐渐往父级执行上下文的变量对象中查找，一直找到全局上下文，而这个寻找的过程就是在走作用域链。</p>
<p>每一个 javaScript 函数都表示为一个对象，更确切地说，是 Function 对象的一个实例。</p>
<h2 id="DOM常见的操作方式"><a href="#DOM常见的操作方式" class="headerlink" title="DOM常见的操作方式"></a>DOM常见的操作方式</h2><h3 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h3><ol>
<li>document.getElementBy<strong>Id</strong> ：根据ID查找元素，大小写敏感，如果有多个结果，只返回第一个；</li>
<li>document.getElementsBy<strong>Class</strong>Name ：根据类名查找元素，多个类名用空格分隔，返回一个 HTMLCollection 。注意兼容性为IE9+（含）。另外，不仅仅是document，其它元素也支持getElementsByClassName 方法</li>
<li>document.getElementsBy<strong>Tag</strong>Name ：根据标签查找元素， * 表示查询所有标签，返回一个 HTMLCollection。</li>
<li>document.getElementsBy<strong>Name</strong> ：根据元素的name属性查找，返回一个 NodeList 。</li>
<li>document.<strong>querySelector</strong> ：返回单个Node，IE8+(含），如果匹配到多个结果，只返回第一个。</li>
<li>document.querySelector<strong>All</strong> ：返回一个 NodeList ，IE8+(含）。</li>
<li>document.<strong>forms</strong> ：获取当前页面所有form，返回一个 HTMLCollection</li>
</ol>
<h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> elem = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>); <span class="comment">//创建div这种element</span></span><br><span class="line">elem.id = <span class="string">&#x27;haorooms&#x27;</span>;  </span><br><span class="line">elem.style = <span class="string">&#x27;color: red&#x27;</span>;  </span><br><span class="line">elem.innerHTML = <span class="string">&#x27;我是新创建的haorooms测试节点&#x27;</span>;  </span><br><span class="line"><span class="built_in">document</span>.body.appendChild(elem);  <span class="comment">//添加到HTML文件</span></span><br><span class="line"><span class="comment">//另一种：parentNode.insertBefore(newNode, refNode);  </span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> node = <span class="built_in">document</span>.createTextNode(<span class="string">&quot;我是文本节点&quot;</span>); <span class="comment">//创建text node  </span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">from</span> = <span class="built_in">document</span>.getElementById(<span class="string">&quot;test&quot;</span>);  </span><br><span class="line"><span class="keyword">var</span> clone = <span class="keyword">from</span>.cloneNode(<span class="literal">true</span>); <span class="comment">//克隆</span></span><br><span class="line">clone.id = <span class="string">&quot;test2&quot;</span>;  </span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//js谷歌浏览器，火狐浏览器，IE8+</span></span><br><span class="line">el.insertAdjacentHTML(<span class="string">&#x27;beforebegin&#x27;</span>, htmlString);</span><br><span class="line"></span><br><span class="line">targetElement.insertAdjacentElement(position, element);</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除指定的子节点并返回子节点</span></span><br><span class="line"><span class="keyword">var</span> deletedChild = parent.removeChild(node);  </span><br><span class="line"></span><br><span class="line">parent.replaceChild(newChild, oldChild);</span><br></pre></td></tr></table></figure>

<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">element.setAttribute(name, value);  <span class="comment">//设</span></span><br><span class="line"><span class="keyword">var</span> value = element.getAttribute(<span class="string">&quot;id&quot;</span>); <span class="comment">//取</span></span><br><span class="line"><span class="keyword">if</span> (foo.hasAttribute(<span class="string">&quot;bar&quot;</span>)) &#123; &#125; <span class="comment">//检查</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">data-id</span>=<span class="string">&quot;1234567890&quot;</span> <span class="attr">data-user</span>=<span class="string">&quot;johndoe&quot;</span> <span class="attr">data-date-of-birth</span>&gt;</span>John Doe<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> el = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#user&#x27;</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  el.id == <span class="string">&#x27;user&#x27;</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//只要上面html的属性是data-XXX的格式</span></span></span><br><span class="line"><span class="javascript">  el.dataset.id === <span class="string">&#x27;1234567890&#x27;</span></span></span><br><span class="line"><span class="javascript">  el.dataset.user === <span class="string">&#x27;johndoe&#x27;</span></span></span><br><span class="line"><span class="javascript">  el.dataset.dateOfBirth === <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//直接修改元素的样式</span></span><br><span class="line">elem.style.color = <span class="string">&#x27;red&#x27;</span>;  </span><br><span class="line">elem.style.setProperty(<span class="string">&#x27;font-size&#x27;</span>, <span class="string">&#x27;16px&#x27;</span>);  </span><br><span class="line">elem.style.removeProperty(<span class="string">&#x27;color&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//往HTML里面添加style的新属性</span></span><br><span class="line"><span class="keyword">var</span> style = <span class="built_in">document</span>.createElement(<span class="string">&#x27;style&#x27;</span>);  </span><br><span class="line">style.innerHTML = <span class="string">&#x27;body&#123;color:red&#125; #top:hover&#123;background-color: red;color: white;&#125;&#x27;</span>;  </span><br><span class="line"><span class="built_in">document</span>.head.appendChild(style);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给div删增转换class</span></span><br><span class="line">div.classList.remove(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line">div.classList.add(<span class="string">&quot;anotherclass&quot;</span>);</span><br><span class="line">div.classList.toggle(<span class="string">&quot;visible&quot;</span>);</span><br><span class="line">div.classList.replace(<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;bar&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 增减多个class</span></span><br><span class="line">div.classList.add(<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;baz&quot;</span>);</span><br><span class="line">div.classList.remove(<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;baz&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用 spread syntax 增减多个 class</span></span><br><span class="line"><span class="keyword">let</span> cls = [<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;bar&quot;</span>];</span><br><span class="line">div.classList.add(...cls); </span><br><span class="line">div.classList.remove(...cls);</span><br><span class="line"></span><br><span class="line"><span class="comment">//element.style只能用内联样式，window.getComputedStyle 可以获得所有的样式</span></span><br><span class="line"><span class="keyword">var</span> style = <span class="built_in">window</span>.getComputedStyle(element[, pseudoElt]);  </span><br></pre></td></tr></table></figure>

<h3 id="高度"><a href="#高度" class="headerlink" title="高度"></a>高度</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> clientRect = element.getBoundingClientRect();  </span><br><span class="line"><span class="comment">//clientRect是一个 DOMRect 对象，包含width、height、left、top、right、bottom，它是相对于窗口顶部而不是文档顶部，滚动页面时它们的值是会发生动态变化的。</span></span><br></pre></td></tr></table></figure>

<h2 id="Array-sort"><a href="#Array-sort" class="headerlink" title="Array.sort()"></a>Array.sort()</h2><p>在chrome中&lt;=10的数组使用的是稳定的插入算法，&gt;10使用不稳定的快速排序算法。为什么？因为使用不稳定的算法在小数量的排序中可能会损失性能，而且overhead可能也较大。插入算法通常在8个或以下的少量元素中用于排序，算法复杂度O($n^2$)，按顺序取出item并插入合适位置。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 交换元素位置</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">array, i, k</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> temp = array[i];</span><br><span class="line">        array[i] = array[k];</span><br><span class="line">        array[k] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 数组分区，左小右大</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">partition</span>(<span class="params">array, left, right</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> storeIndex = left; <span class="comment">// 选最左手边的元素作为开始 </span></span><br><span class="line">        <span class="keyword">var</span> pivot = array[right]; <span class="comment">// 选最右边的元素为基准元素</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = left; i &lt; right; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (array[i] &lt; pivot) &#123;</span><br><span class="line">                swap(array, storeIndex, i);</span><br><span class="line">                storeIndex++; <span class="comment">// 交换位置把小于pivot的数放到左手边，storeIndex +1 来保持它指向 &gt; Pivot 的字串的开端，也就是作为pivot的代理人</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        swap(array, right, storeIndex); <span class="comment">// 将基准元素放置到最后的正确位置上</span></span><br><span class="line">        <span class="keyword">return</span> storeIndex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params">array, left, right</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (left &lt;= right) &#123;</span><br><span class="line">        <span class="keyword">var</span> storeIndex = partition(array, left, right); <span class="comment">//成功分成了左右两边，一边都大于pivot，一边都小于</span></span><br><span class="line">            sort(array, left, storeIndex - <span class="number">1</span>);</span><br><span class="line">            sort(array, storeIndex + <span class="number">1</span>, right); <span class="comment">//对于左右两边再分别quick sort（递归）</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">//使用定义的三种方法来排序</span></span><br><span class="line">    sort(array, <span class="number">0</span>, array.length - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h2><p>Asynchronous Javascript and XML（异步JS和XML）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadDoc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1. 创建`XMLHttpRequest`对象,也就是创建一个异步调用对象.</span></span><br><span class="line">  <span class="keyword">var</span> xhttp = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">  <span class="comment">// 2. 设置响应`HTTP`请求状态变化的函数.</span></span><br><span class="line">  xhttp.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.readyState == <span class="number">4</span> &amp;&amp; <span class="built_in">this</span>.status == <span class="number">200</span>) &#123;</span><br><span class="line">     <span class="built_in">document</span>.getElementById(<span class="string">&quot;demo&quot;</span>).innerHTML = <span class="built_in">this</span>.responseText;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// 3. 创建一个新的`HTTP`请求,并指定该`HTTP`请求的方法、`URL`及验证信息.</span></span><br><span class="line">  xhttp.open(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;ajax_info.txt&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">  <span class="comment">// 4. 发送`HTTP`请求.</span></span><br><span class="line">  xhttp.send();</span><br><span class="line">    <span class="comment">// 5. 获取异步调用返回的数据</span></span><br><span class="line">  <span class="comment">// 6. 使用JavaScript和DOM实现局部刷新.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    url: <span class="string">&quot;test.html&quot;</span>,</span><br><span class="line">  cache: <span class="literal">false</span>, <span class="comment">//浏览器不要缓存这个请求的页面，default = true</span></span><br><span class="line">  success: <span class="function"><span class="keyword">function</span>(<span class="params">html</span>)</span>&#123; <span class="comment">//成功拿到请求的 html</span></span><br><span class="line">    $(<span class="string">&#x27;#results&#x27;</span>).append(html); <span class="comment">//往id = result的内容后面加上取回的 html</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> menuId = $(<span class="string">&quot;ul.nav&quot;</span>).first().attr(<span class="string">&quot;id&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> request = $.ajax(&#123;</span><br><span class="line">  url: <span class="string">&quot;script.php&quot;</span>,</span><br><span class="line">  type: <span class="string">&quot;POST&quot;</span>, <span class="comment">//default = “GET”</span></span><br><span class="line">  data: &#123;<span class="attr">id</span> : menuId&#125;, <span class="comment">//键值对的object</span></span><br><span class="line">  dataType: <span class="string">&quot;html&quot;</span> <span class="comment">//应该期待返回的内容的格式</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//done：请求成功</span></span><br><span class="line">request.done(<span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">  $(<span class="string">&quot;#log&quot;</span>).html( msg );</span><br><span class="line">  <span class="comment">//这里html()的知识点</span></span><br><span class="line">  <span class="comment">//$(selector).html() 返回html内容</span></span><br><span class="line">  <span class="comment">//$(selector).html(content) 设定html内容</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//fail：请求失败</span></span><br><span class="line">request.fail(<span class="function"><span class="keyword">function</span>(<span class="params">jqXHR, textStatus</span>) </span>&#123;</span><br><span class="line">  alert( <span class="string">&quot;Request failed: &quot;</span> + textStatus );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$axios(&#123;</span><br><span class="line">  method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">  url: <span class="string">&quot;some url&quot;</span>,</span><br><span class="line">  data: params</span><br><span class="line">&#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//回调函数</span></span><br><span class="line">&#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//handle error</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="JS的垃圾回收机制"><a href="#JS的垃圾回收机制" class="headerlink" title="JS的垃圾回收机制"></a>JS的垃圾回收机制</h2><p>V8内存限制在64位的1.4G和32位的0.7G，堆内存分为新生代和老生代内存</p>
<p>新生代只有64位下的32M和32位下的16M，里面又分为From 和 To ，在对 From 垃圾回收的时候，如果对象存活的话，就移到 To，遍历完就 From 和 To 对调。经历过一次以上的 GC 的对象，变量就会晋升到老生代。</p>
<h3 id="垃圾收集"><a href="#垃圾收集" class="headerlink" title="垃圾收集"></a>垃圾收集</h3><p><strong>计数</strong>：如果没有引用指向这一个对象，那么就清除掉，但如果有两个无用变量互相引用则不会被回收</p>
<p><strong>标记-清除</strong>：现代浏览器使用，标记存活对象，释放非存活的，有两种标记方法，一种是<strong>增量标记</strong>，即在代码执行间隙进行回收，指导循环完成。另一种是<strong>并发标记</strong>：Chrome和node都支持标记和应用程序同时运行。</p>
<h2 id="onclick-和-addEventListener"><a href="#onclick-和-addEventListener" class="headerlink" title="onclick 和 addEventListener"></a>onclick 和 addEventListener</h2><p>onclick 只能给元素注册一个事件，如果存在多个，则后面的事件会覆盖前面的事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box1 = <span class="built_in">document</span>.getElementById(<span class="string">&quot;box1&quot;</span>);</span><br><span class="line">box1.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;You click me!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//删除事件</span></span><br><span class="line">box1.onclick = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>

<p>addEventListener允许给一个事件注册多个listener监听器，添加的事件不会覆盖已存在的事件。addEventListener对任何DOM都是有效的，而onclick仅限于HTML。addEventListener可以控制listener的触发阶段，（捕获/冒泡）。对于多个相同的事件处理器，不会重复触发，不需要手动使用removeEventListener清除；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">box1.addEventListener (<span class="string">&quot;click&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;我是第一个&quot;</span>);</span><br><span class="line">    &#125;,<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//false：冒泡</span></span><br><span class="line"><span class="comment">//true：捕获</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//删除event</span></span><br><span class="line"><span class="comment">//removeEventListener(事件名，处理函数);</span></span><br></pre></td></tr></table></figure>

<h2 id="Location对象"><a href="#Location对象" class="headerlink" title="Location对象"></a>Location对象</h2><p>是Window.Location，表示当前窗口的URL</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.location.href <span class="comment">//获取当前完整url</span></span><br><span class="line"><span class="built_in">window</span>.location.protocol <span class="comment">//HTTP/ HTTPS</span></span><br><span class="line"><span class="built_in">window</span>.location.host <span class="comment">//localhost</span></span><br><span class="line"><span class="built_in">window</span>.location.hostname <span class="comment">//www.example.com</span></span><br><span class="line"><span class="built_in">window</span>.location.port <span class="comment">//8080</span></span><br><span class="line"><span class="built_in">window</span>.location.pathname <span class="comment">//products/search.php</span></span><br><span class="line"><span class="built_in">window</span>.location.search <span class="comment">//query likes ?q=ipad</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.location.assign(<span class="string">&quot;https://www.tutorialrepublic.com&quot;</span>)；<span class="comment">// =     window.location.href = &quot;https://www.tutorialrepublic.com&quot;;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.location.replace(<span class="string">&quot;https://www.tutorialrepublic.com&quot;</span>); <span class="comment">//最大的区别在于没有历史记录，所以无法后退到此条目</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.location.reload(<span class="literal">true</span>);<span class="comment">//true 强制从服务器加载页面， false则可能从缓存中取出</span></span><br></pre></td></tr></table></figure>

<h2 id="浏览器从输入URL到页面渲染的整个流程"><a href="#浏览器从输入URL到页面渲染的整个流程" class="headerlink" title="浏览器从输入URL到页面渲染的整个流程"></a>浏览器从输入URL到页面渲染的整个流程</h2><p>DNS 域名在各级的域名服务器中解析成IP地址（递归查询） -&gt; DNS多级缓存，DNS重定向（CDN）-&gt; HTTPS（TLS/SSL加密握手）/ GET index.html HTTP/1.1 （请求报头+请求正文rest，数据格式JSON）-&gt; 状态码（200，404，3XX重定向），响应报头+响应报文 -&gt; 渲染拿到的HTML/CSS/JS（HTML变成DOM树，CSS构建渲染树，DOM中每个元素都是box，reflow位置大小+repaint颜色字体）-&gt; JS的执行是一个主线程（同步） + 任务队列（异步），JS会阻碍渲染的过程，因为JS执行完成之前，资源的下载是没有必要的（JS可能会修改DOM结构）</p>
<h2 id="五层模型协议"><a href="#五层模型协议" class="headerlink" title="五层模型协议"></a>五层模型协议</h2><ol start="5">
<li><p>应用层：HTTP，FTP（对于传输的内容有了更多的定义：文件传输，电子邮件，文件服务）</p>
</li>
<li><p>传输层：TCP，UDP（稳定/实时的传输，端对端的接口）</p>
</li>
<li><p>网络层：IP（单纯的传输，什么也不能保证，为数据包选择路由）</p>
</li>
<li><p>数据链路层：SLIP，CSLIP（传输有地址的帧以及错误检测功能）</p>
</li>
<li><p>物理层：ISO2110，IEEE802（以二进制数据形式在物理媒体上传输数据）</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/08/07/frontend-interview-Q-A/" data-id="ckdjphwiu00001tqv3ijv3ca3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-BackEnd-notes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/04/BackEnd-notes/" class="article-date">
  <time datetime="2020-08-04T03:27:16.000Z" itemprop="datePublished">2020-08-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/04/BackEnd-notes/">BackEnd notes</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Static-vs-Dynamic"><a href="#Static-vs-Dynamic" class="headerlink" title="Static vs Dynamic"></a>Static vs Dynamic</h2><p>一个网页看起来会动不代表是dynamic的，dynamic意味着每次打开都可能是不同的html/css/js</p>
<p>网络是如何运作的？先从网站名查询到ip地址，向ip地址请求具体的网页，然后服务器在接收到HTTP的请求之后，确定如何response</p>
<p>GET 请求网页，取回：<a target="_blank" rel="noopener" href="http://www.reddit.com/search?q=cats">http://www.reddit.com/search?q=cats</a> 我们有可能像这样传一些参数，但是这些参数不会添加到database里面去</p>
<h2 id="Command-Line"><a href="#Command-Line" class="headerlink" title="Command Line"></a>Command Line</h2><p>ls 显示当前所在的所有的文件和文件夹（list）</p>
<p>cd 更改所在的路径 change directories</p>
<p>touch 创建新文件</p>
<p>mkdir 创建文件夹</p>
<p>rm 删除文件</p>
<p>rm -rf 删除文件夹里的所有东西 recursive force（-rf是一个flag）</p>
<p>cd .. 的意思是返回到上一级的文件夹</p>
<p>cd xxx 进入xxx文件夹（只要写首字母+ tab，就有自动补全）</p>
<p>touch yellow.txt</p>
<p>mkdir FavColors</p>
<p>rm blue.txt</p>
<p>node hello.js 运行hello.js</p>
<h2 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h2><p>我们想要使用npm的前提是先初始化好npm</p>
<p><strong>npm init -f</strong> //直接初始化 package.json, -f 用于跳过问题直接开始</p>
<p><strong>npm install formidable –save</strong> //安装依赖，–save将此依赖信息存入package.json</p>
<p>在.js 中使用npm</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> joke = <span class="built_in">require</span>(<span class="string">&quot;knock-knock-jokes&quot;</span>); <span class="comment">//include package</span></span><br><span class="line"><span class="built_in">console</span>.log(joke()); <span class="comment">//joke在这里就是这个package的方法</span></span><br></pre></td></tr></table></figure>

<p>使用faker这一个npm来产生一些假数据</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> faker = <span class="built_in">require</span>(<span class="string">&quot;faker&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> productName;</span><br><span class="line"><span class="keyword">var</span> productPrice;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;===================&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;WELCOME TO MY SHOP!&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;===================&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i  = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">    productName = faker.commerce.product();</span><br><span class="line">    productPrice = faker.commerce.price();</span><br><span class="line">    <span class="built_in">console</span>.log(productName + <span class="string">&quot; - $&quot;</span> + productPrice);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="route"><a href="#route" class="headerlink" title="route"></a>route</h2><p>express和node js的关系就是，express是一个现成的Node js架构。可以使用中间件（body-parser）来响应HTTP请求（处理JSON等），定义路由器执行不同的HTTP请求的动作，使用模版传递参数动态渲染HTML的页面。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">//route: / =&gt; Hi there!</span></span><br><span class="line">app.get(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">&quot;Hi there!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> thing = req.params.thing;</span><br><span class="line">    res.render(<span class="string">&quot;home.ejs&quot;</span>, &#123;<span class="attr">thingVar</span>: thing&#125;);<span class="comment">//需要把文件放在名字为views的文件夹里</span></span><br><span class="line">&#125;);<span class="comment">//告诉电脑在home.ejs里面的EJS变量thingVar取thing这个变量的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// /bye =&gt; Goodbye!</span></span><br><span class="line">app.get(<span class="string">&quot;/bye&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">&quot;Goodbye!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&quot;*&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">   res.send(<span class="string">&quot;Page not found!&quot;</span>); <span class="comment">//work for all links that are not defined </span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//tell Express to listen for request (specify by Cloud9)</span></span><br><span class="line">app.listen(process.env.PORT, process.env.IP, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Server has started&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>我们不能把*匹配放在最前面，因为这样的话，所有的routing都会被拦截</p>
<p>route parameter</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在需要成为变量的位置前面加上：来区分</span></span><br><span class="line">app.get(<span class="string">&quot;/r/:subredditName/comments/:id/:title&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> subreddit = req.params.subredditName; <span class="comment">//取route变量的内容</span></span><br><span class="line">  res.send(<span class="string">&quot;Welcome to the &quot;</span> + subreddit + <span class="string">&quot;!&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h2><p>什么是package.json?它是一种用于描述app的很简略的meta data，比如contributor，dependency，license这样的信息。把package.json想象成是一份菜谱，别人在分享代码的时候，不想把依赖的所有的包都带上，因为这样会变得很大，而且你很可能已经安装了其中的一部分包了。所以在你收到菜谱之后，你根据现有的食材，再去补齐其余的食材将会是更好的办法。前面也有提到过应当如何去创建一个package.json: <strong>npm init</strong></p>
<h2 id="EJS-Embedded-Javascript"><a href="#EJS-Embedded-Javascript" class="headerlink" title="EJS (Embedded Javascript)"></a>EJS (Embedded Javascript)</h2><p>要npm install ejs</p>
<p>在HTML里面用JS来作为template</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--这就是要显示的EJS--&gt;&lt;%&#x3D; thingVar %&gt;</span><br><span class="line">&lt;% if (thingVar.toLowerCase() &#x3D;&#x3D;&#x3D; &quot;rusty&quot;)&#123; &lt;%&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    Good Choice!</span><br><span class="line">  &lt;&#x2F;p&gt;</span><br><span class="line">&lt;%&gt;  &#125;else&#123;  &lt;%&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    Bad Choice!</span><br><span class="line">  &lt;&#x2F;p&gt;</span><br><span class="line">&lt;%&gt; &#125; &lt;%&gt; &lt;!--这些只是逻辑的不要显示的没有等号--&gt;</span><br></pre></td></tr></table></figure>

<h2 id="DRY-css"><a href="#DRY-css" class="headerlink" title="DRY .css"></a>DRY .css</h2><p>创建一个新的文件夹 public 来盛放 .css 文件，但是默认的情况是express只会使用views这一个文件夹，其他的文件夹不会默认被纳入express使用的范围。使用下面的语句使得express能够使用public这一个文件夹。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.static(<span class="string">&quot;public&quot;</span>));</span><br><span class="line"></span><br><span class="line">app.set(<span class="string">&quot;view engine&quot;</span>, <span class="string">&quot;ejs&quot;</span>);<span class="comment">//使用这一语句之后，后面的res.render(&quot;home&quot;)就行，不需要给每一个都加上.ejs</span></span><br></pre></td></tr></table></figure>

<p>我们可以在views里面创建一个partial的文件夹，然后添加上footer.ejs + header.ejs。这两个就是所有其他的ejs文件都必须需要的header和footer的内容。在其他的ejs的头尾加上：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;% include partials&#x2F;header %&gt;</span><br><span class="line">&lt;% include partials&#x2F;footer %&gt;</span><br></pre></td></tr></table></figure>

<p>但是我们会发现我们的css没有成功连接上了。我们需要把css的链接改成不是在当前文件夹，而是从root开始查找。在前面加上/就行。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span> = <span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span> = <span class="string">&quot;text/css&quot;</span> <span class="attr">href</span> = <span class="string">&quot;/app.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">&quot;body-parser&quot;</span>);</span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">true</span>&#125;)); <span class="comment">//把request body转换成javascript object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> friends = [<span class="string">&quot;Tony&quot;</span>, <span class="string">&quot;Lily&quot;</span>];</span><br><span class="line"></span><br><span class="line">app.post(<span class="string">&quot;/addfriend&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> newfriend = req.body.newfriend;<span class="comment">//这里是吧form的输入的变量取出来</span></span><br><span class="line">        friends.push(newfriend);</span><br><span class="line">      res.redirect(<span class="string">&quot;/friends&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&quot;/friends&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">  res.render(<span class="string">&quot;friends&quot;</span>, &#123;<span class="attr">friends</span>: friends&#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span> = <span class="string">&quot;/addfriend&quot;</span> <span class="attr">method</span> = <span class="string">&quot;POST&quot;</span>&gt;</span><span class="comment">&lt;!--action要对上js里的post地址，method选择POST--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;text&quot;</span> <span class="attr">name</span> = <span class="string">&quot;newfriend&quot;</span> <span class="attr">placeholder</span> = <span class="string">&quot;name&quot;</span>&gt;</span><span class="comment">&lt;!--这里的name就是我们把input收到的信息放入到request body的方式，即 newfriend: &quot;text-input&quot;--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span>&gt;</span></span><br><span class="line">      I made a new friend!</span><br><span class="line">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>npm body-parser –save</p>
</blockquote>
<h2 id="API-Application-Programming-Interface"><a href="#API-Application-Programming-Interface" class="headerlink" title="API (Application Programming Interface)"></a>API (Application Programming Interface)</h2><p>我们在请求API的时候，我们不需要html的format和各种css的格式。我们只需要纯纯的数据，所以这时候我们会使用json（Javascript Object Notation）或者xml（Extended Markup Language: key-value pair）。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;person&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;age&quot;</span>: <span class="string">&quot;21&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Travis&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;city&quot;</span>: <span class="string">&quot;Los Angeles&quot;</span></span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">person</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">age</span>&gt;</span>21<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>Travis<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">city</span>&gt;</span>LA<span class="tag">&lt;/<span class="name">city</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">person</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们需要先安装request npm：npm install request。如果我们知道某一个变量只会被assign一次就不会再变，我们应当把var改成const</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> request = <span class="built_in">require</span>(<span class="string">&quot;request&quot;</span>);</span><br><span class="line">request(<span class="string">&quot;http://www.google.com&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">error, response, body</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!error &amp;&amp; response.statusCode == <span class="number">200</span>)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(body);<span class="comment">//html内容，string格式</span></span><br><span class="line">    <span class="comment">//比如说我们拿到的是json，我么可以这样来处理</span></span><br><span class="line">    <span class="keyword">const</span> parsedData = <span class="built_in">JSON</span>.parse(body); <span class="comment">//把string变成javascript object</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;the temperature at Hawaii is &quot;</span> + parsedData[<span class="string">&quot;query&quot;</span>][<span class="string">&quot;results&quot;</span>][<span class="string">&quot;channel&quot;</span>][<span class="string">&quot;astronomy&quot;</span>]);</span><br><span class="line">    <span class="comment">//另一种写法</span></span><br><span class="line">    <span class="built_in">console</span>(<span class="string">`the temperature at Hawaii is <span class="subst">$&#123;parsedData.query.results.channel.astronomy&#125;</span>`</span>);</span><br><span class="line">    <span class="comment">//上引号指明里面的argument需要被处理成string，语法糖</span></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//最新的语法</span></span><br><span class="line"><span class="keyword">const</span> rp = <span class="built_in">require</span>(<span class="string">&quot;request-promise&quot;</span>);</span><br><span class="line">rp(<span class="string">&quot;http://www.google.com&quot;</span>)</span><br><span class="line">    <span class="comment">//.then((body) =&gt; &#123;&#125;) 另一种写法</span></span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">body</span>)</span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(body);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>)</span>&#123;</span><br><span class="line">      <span class="comment">//.catch((err) =&gt; &#123;&#125;) 另一种写法</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Error!&quot;</span>, err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>我们在调用API的时候，应该怎么写链接？</p>
<p>omdbapi.com/?s=star&amp;plot=short</p>
<p>?给我们传参数的机会，&amp;让我们传入多个参数</p>
<h2 id="SQL-amp-NoSQL"><a href="#SQL-amp-NoSQL" class="headerlink" title="SQL &amp; NoSQL"></a>SQL &amp; NoSQL</h2><p>SQL是关系型，关系型是table类型的，不同的table要相互联系往往是使用一个id table来join。相反，NoSQL是一个非关系型的数据库使用方法，数据被储存成类似于javascript的object形式。</p>
<p>在AWS Cloud9里使用MongoDB：</p>
<p>创建 touch mongodb-org-3.6.repo<br>把下列内容黏贴到该文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[mongodb-org-3.6]</span><br><span class="line">name&#x3D;MongoDB Repository</span><br><span class="line">baseurl&#x3D;https:&#x2F;&#x2F;repo.mongodb.org&#x2F;yum&#x2F;amazon&#x2F;2013.03&#x2F;mongodb-org&#x2F;3.6&#x2F;x86_64&#x2F;</span><br><span class="line">gpgcheck&#x3D;1</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">gpgkey&#x3D;https:&#x2F;&#x2F;www.mongodb.org&#x2F;static&#x2F;pgp&#x2F;server-3.6.asc</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mv mongodb-org-3.6.repo &#x2F;etc&#x2F;yum.repos.d</span><br><span class="line">sudo yum install -y mongodb-org</span><br></pre></td></tr></table></figure>

<p>关闭<strong>mongodb-org-3.6.repo</strong>文件，并在出现提示时按“ <strong>关闭”选项卡</strong><br>cd回ec2-user</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir data</span><br><span class="line">echo &#39;mongod --dbpath&#x3D;data --nojournal&#39; &gt; mongod</span><br><span class="line">chmod a+x mongod</span><br></pre></td></tr></table></figure>

<p> ./mongod 打开，要在ec2-user～下进行</p>
<p><strong>CRUD</strong> 在Mongo command line</p>
<ul>
<li><p>Create: db.dogs.insert({name: “Rusty”, breed: “Mutt”})</p>
</li>
<li><p>Read: db.dogs.find({breed: “Mutt”})</p>
</li>
<li><p>Update: db.dogs.update({name: “Rusty”}, {$set: (name: “Tater”, isCute: true)}) 这里第一个参数是要改动的object，第二个参数是需要改动的内容，可以增加不存在的attribute</p>
</li>
<li><p>Delete: db.dogs.remove({breed: “Mutt”})</p>
</li>
</ul>
<h2 id="Mongoose"><a href="#Mongoose" class="headerlink" title="Mongoose"></a>Mongoose</h2><p>在node js里更好地使用Mongo DB的一种工具。同样是使用npm进行下载。并在js里使用</p>
<p>npm install –save <a href="mailto:&#109;&#x6f;&#x6e;&#x67;&#x6f;&#111;&#115;&#101;&#64;&#x35;&#x2e;&#x33;&#46;&#x31;&#x35;">&#109;&#x6f;&#x6e;&#x67;&#x6f;&#111;&#115;&#101;&#64;&#x35;&#x2e;&#x33;&#46;&#x31;&#x35;</a>（最新的版本）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">&quot;mongoose&quot;</span>);</span><br><span class="line"></span><br><span class="line">mongoose.connect(<span class="string">&quot;mongodb://localhost/toys_hub&quot;</span>, &#123;<span class="attr">useNewUrlParser</span>: <span class="literal">true</span>, <span class="attr">useUnifiedTopology</span>: <span class="literal">true</span>&#125;);</span><br><span class="line"><span class="comment">//如果没有cat_app存在，那么这行代码和上面一样，会自动创建一个，27017是默认的端口</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.</span></span><br><span class="line"><span class="keyword">var</span> catSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">  name: <span class="built_in">String</span>,</span><br><span class="line">  age: <span class="built_in">Number</span>,</span><br><span class="line">  temperament: <span class="built_in">String</span></span><br><span class="line">&#125;); <span class="comment">//just pattern</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.</span></span><br><span class="line"><span class="keyword">var</span> Cat = mongoose.model(<span class="string">&quot;Cat&quot;</span>, catSchema);<span class="comment">//singular version of our model with many methods, create collections automatically with plural</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.</span></span><br><span class="line"><span class="keyword">var</span> george = <span class="keyword">new</span> Cat(&#123;</span><br><span class="line">  name: <span class="string">&quot;George&quot;</span>,</span><br><span class="line">  age: <span class="number">11</span>,</span><br><span class="line">  temperament:  <span class="string">&quot;Grouchy&quot;</span></span><br><span class="line">&#125;);<span class="comment">//create</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.</span></span><br><span class="line">george.save(<span class="function"><span class="keyword">function</span>(<span class="params">err, cat</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Something wrong&quot;</span>)</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Just saved a cat to the database:&quot;</span>);</span><br><span class="line">    cosole.log(cat);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);<span class="comment">//save to the collection, handle the error if not save successfully, callback run after the save() is run</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//another way</span></span><br><span class="line">Cat.create(&#123;</span><br><span class="line">  name: <span class="string">&quot;Snow White&quot;</span>,</span><br><span class="line">  age: <span class="number">15</span>,</span><br><span class="line">  temperament: <span class="string">&quot;Bland&quot;</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, cat</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(err)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(cat);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);<span class="comment">//use this create() function, to add directly, and the 2rd attribute is a callback function that handle unsuccessful situation</span></span><br><span class="line"></span><br><span class="line">Cat.find(&#123;&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, cats</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Oh no, error!&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;All the cats:&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(cats);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);<span class="comment">//show all the cats and handle the error may be shown</span></span><br></pre></td></tr></table></figure>

<p>命令行看数据库里的内容</p>
<blockquote>
<p>mongo -&gt; show dbs -&gt; toys_hub -&gt; use toys_hub -&gt; show collections -&gt; db.toys.find()</p>
</blockquote>
<h2 id="RESTFUL-ROUTES"><a href="#RESTFUL-ROUTES" class="headerlink" title="RESTFUL ROUTES"></a>RESTFUL ROUTES</h2><table>
<thead>
<tr>
<th>name</th>
<th>url</th>
<th>verb</th>
<th>desc.</th>
</tr>
</thead>
<tbody><tr>
<td>INDEX</td>
<td>/dogs</td>
<td>GET</td>
<td>Display a list of dogs</td>
</tr>
<tr>
<td>NEW</td>
<td>/dogs/new</td>
<td>GET</td>
<td>Display form to create a dog</td>
</tr>
<tr>
<td>CREATE</td>
<td>/dogs</td>
<td>POST</td>
<td>Add new dog to DB</td>
</tr>
<tr>
<td>SHOW</td>
<td>/dogs/:id</td>
<td>GET</td>
<td>Shows info of one dog</td>
</tr>
<tr>
<td>EDIT</td>
<td>/dogs/:id/edit</td>
<td>GET</td>
<td>show edits form for a dog</td>
</tr>
<tr>
<td>UPDATE</td>
<td>/dogs/:id</td>
<td>PUT</td>
<td>update a dog</td>
</tr>
<tr>
<td>DESTROY</td>
<td>/dogs/:id</td>
<td>DELETE</td>
<td>delete a dog</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">&quot;/campgrounds/:id&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">  Campground.findById(req.params.id, <span class="function"><span class="keyword">function</span>(<span class="params">err, foundCampround</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      res.render(<span class="string">&quot;show&quot;</span>, &#123;<span class="attr">campground</span>:foundCampground&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> userSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">  email: <span class="built_in">String</span>,</span><br><span class="line">  name: <span class="built_in">String</span>,</span><br><span class="line">  posts: [postSchema]</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//then push() &amp; save() posts</span></span><br><span class="line"><span class="comment">//这种方法是embedded object，所有的post都是存在于user里面的</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//另一种方法，使用reference</span></span><br><span class="line"><span class="keyword">var</span> userSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">  email: <span class="built_in">String</span>,</span><br><span class="line">  name: <span class="built_in">String</span>,</span><br><span class="line">  posts: [</span><br><span class="line">    &#123;</span><br><span class="line">      type: mongoose.Schema.Types.ObjectId,</span><br><span class="line">      ref: <span class="string">&quot;Post&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">User.create(&#123;</span><br><span class="line">  name: <span class="string">&quot;Bob&quot;</span>,</span><br><span class="line">  email: <span class="string">&quot;bob@gmail.com&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Post.create(&#123;</span><br><span class="line">    title: <span class="string">&quot;How to cook the best burger&quot;</span>,</span><br><span class="line">  content: <span class="string">&quot;blah blah blah&quot;</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, post</span>)</span>&#123;</span><br><span class="line">  User.findOne(&#123;<span class="attr">email</span>: <span class="string">&quot;bob@gmail.com&quot;</span>&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, foundUser</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      foundUser.posts.push(post);</span><br><span class="line">      foundUser.save(<span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(err);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(data);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过这种方法，post里面不仅仅是一个post id，而是具体的posts</span></span><br><span class="line">User.findOne(&#123;<span class="attr">email</span>: <span class="string">&quot;bob@gmail.com&quot;</span>&#125;).populate(<span class="string">&quot;post&quot;</span>).exec(<span class="function"><span class="keyword">function</span>(<span class="params">err, user</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(err)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(user);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>删库跑路 db.collection.drop() 写在命令行里</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href &#x3D; &quot;&#x2F;campgrounds&#x2F; &lt;%&#x3D; campground._id %&gt;&quot;&gt;More Info &lt;&#x2F;a&gt;</span><br></pre></td></tr></table></figure>

<p>这个id是mongo产生的一个唯一的id</p>
<h2 id="Module-Export"><a href="#Module-Export" class="headerlink" title="Module Export"></a>Module Export</h2><p>当我们在把文件分离开的时候，可以用require来获取其他js里的内容，这个时候需要我们explicit export内容，不然require也不会获取到任何东西</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">&quot;mongoose&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> postSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">  title: <span class="built_in">String</span>,</span><br><span class="line">  content: <span class="built_in">String</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//关键</span></span><br><span class="line"><span class="built_in">module</span>.exports = mongoose.model(<span class="string">&quot;Post&quot;</span>, postSchema);</span><br></pre></td></tr></table></figure>

<p>在另一个js文件里</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// “./” 意味着当前地址</span></span><br><span class="line"><span class="keyword">var</span> Post = <span class="built_in">require</span>(<span class="string">&quot;./models/post&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Seeding-the-database"><a href="#Seeding-the-database" class="headerlink" title="Seeding the database"></a>Seeding the database</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">seedDB</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    Campground.remove(&#123;&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err)&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;remove campgrounds!&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = seedDB;</span><br></pre></td></tr></table></figure>

<p>另一个js文件里调用seed</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> seedDB = <span class="built_in">require</span>(<span class="string">&quot;./models/seedDB&quot;</span>);</span><br><span class="line"></span><br><span class="line">seedDB();</span><br></pre></td></tr></table></figure>

<h2 id="使用额外的css"><a href="#使用额外的css" class="headerlink" title="使用额外的css"></a>使用额外的css</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.static(__dirname + <span class="string">&quot;/public&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>在header.ejs里面添加</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span> = <span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span> = <span class="string">&quot;/stylesheets/main.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><p>session就是让http request从stateless变得有state。它的作用很大程度上就是让用户得以登陆并看到特定的与之相关的内容，当用户logout的时候他们将不再能够看到这些内容。（将特定内容和用户登陆这一state绑定，在发送请求的时候实质上是XXX向服务器发起了这一请求）</p>
<p>Passport JS + Express-Session</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ npm init</span><br><span class="line"></span><br><span class="line">$ npm install bodu-parser express express-session mongoose passport passport-local passport-local-mongoose</span><br></pre></td></tr></table></figure>
<h2 id="User-Authentication-一个需要登录才能看到的秘密网页"><a href="#User-Authentication-一个需要登录才能看到的秘密网页" class="headerlink" title="User Authentication 一个需要登录才能看到的秘密网页"></a>User Authentication 一个需要登录才能看到的秘密网页</h2><p>app.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>),</span><br><span class="line">    mongoose = reuiqre(<span class="string">&quot;mongoose&quot;</span>),</span><br><span class="line">    passport = <span class="built_in">require</span>(<span class="string">&quot;passport&quot;</span>),</span><br><span class="line">    bodyParser = <span class="built_in">require</span>(<span class="string">&quot;body-parser&quot;</span>),</span><br><span class="line">    User = <span class="built_in">require</span>(<span class="string">&quot;./models/user&quot;</span>),</span><br><span class="line">    localStrategy = <span class="built_in">require</span>(<span class="string">&quot;passport-local&quot;</span>),</span><br><span class="line">    passportLocalMongoose = <span class="built_in">require</span>(<span class="string">&quot;passport-local-mongoose&quot;</span>);</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">true</span>&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">//==passport configuration==</span></span><br><span class="line">app.use(<span class="built_in">require</span>(<span class="string">&quot;express-session&quot;</span>)(&#123;</span><br><span class="line">  secret: <span class="string">&quot;Rusty is the best&quot;</span>,</span><br><span class="line">  resave: <span class="literal">false</span>,</span><br><span class="line">  saveUninitialized: <span class="literal">false</span></span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line">app.use(passport.initialize());</span><br><span class="line">app.use(passport.session());</span><br><span class="line"></span><br><span class="line">passport.use(<span class="keyword">new</span> LocalStrategy(User.authenticate()));<span class="comment">//authenticate() 是 passport-local-mongoose 带来的功能</span></span><br><span class="line">passport.serializeUser(User.serializeUser());</span><br><span class="line">passport.deserializeUser(User.deserializeUser());</span><br><span class="line"></span><br><span class="line"><span class="comment">//增加中间件 isLoggedIn 如果不是登陆的用户，就重定向</span></span><br><span class="line">app.get(<span class="string">&quot;/secret&quot;</span>, isLoggedIn, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">  res.render(<span class="string">&quot;secret&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//==注册==</span></span><br><span class="line">app.post(<span class="string">&quot;/register&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">  User.register(<span class="keyword">new</span> User(&#123;<span class="attr">username</span>: req.body.username&#125;), req.body.password, <span class="function"><span class="keyword">function</span>(<span class="params">err, user</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">      <span class="keyword">return</span> res.render(<span class="string">&quot;register&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    passport.authenticate(<span class="string">&quot;local&quot;</span>)(req, res, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      res.redirect(<span class="string">&quot;/secret&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//这里post的第二个参数是middleware中间件。中间件是马上运行的，最后一个是callback，在运行完成后才会运行。</span></span><br><span class="line"><span class="comment">//==登陆==</span></span><br><span class="line">app.post(<span class="string">&quot;/login&quot;</span>, passport.authenticate(<span class="string">&quot;local&quot;</span>,  &#123;</span><br><span class="line">         successRedirect: <span class="string">&quot;/secret&quot;</span>, </span><br><span class="line">         failureRedirect: <span class="string">&quot;/login&quot;</span></span><br><span class="line">&#125;), <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//==登出==</span></span><br><span class="line">app.get(<span class="string">&quot;/logout&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">  req.logout();<span class="comment">//删除req的session所有的内容</span></span><br><span class="line">  res.redirect(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//标准的middleware需要这三个参数，next是下一个callback方程</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isLoggedIn</span>(<span class="params">req, res, next</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(req.isAuthenticated())&#123;</span><br><span class="line">    <span class="keyword">return</span> next();</span><br><span class="line">  &#125;</span><br><span class="line">  res.redirect(<span class="string">&quot;/login&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>user.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">&quot;mongoose&quot;</span>),</span><br><span class="line">    passportLOcalMongoose = <span class="built_in">require</span>(<span class="string">&quot;passport-local-mongoose&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> UserSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">  username:<span class="built_in">String</span>,</span><br><span class="line">  password: <span class="built_in">String</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">UserSchema.plugin(passportLocalMongoose);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = mongoose.model(<span class="string">&quot;User&quot;</span>, UserSchema);</span><br></pre></td></tr></table></figure>

<h2 id="YelpCamp-User-Authentication"><a href="#YelpCamp-User-Authentication" class="headerlink" title="YelpCamp User Authentication"></a>YelpCamp User Authentication</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//因此我们使用一个middleware来替代手动的添加</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>)</span>&#123;</span><br><span class="line">  res.locals.currentUser = req.user;</span><br><span class="line">  next();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&quot;/campground&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    Campground.find(&#123;&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, allCampground</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err)&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      res.render(<span class="string">&quot;campground/index&quot;</span>, &#123;<span class="attr">campgrounds</span>: allCampgrounds, <span class="attr">currentUser</span>: req.user&#125;); <span class="comment">//我们需要这个currentUser:req.user出现在所有的route里面因为我们所有的网页都带有这一个nav bar</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (!currentUser)&#123; %&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href &#x3D; &quot;&#x2F;login&quot;&gt;Login&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">  &lt;li&gt;&lt;a href &#x3D; &quot;&#x2F;register&quot;&gt;Sign up&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">&lt;% &#125;else&#123; %&gt;</span><br><span class="line">  &lt;li&gt;&lt;a&gt;Signed in as &lt;%&#x3D; currentUser.username %&gt;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">  &lt;li&gt;&lt;a href &#x3D; &quot;&#x2F;logout&quot;&gt;Logout&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Refactor"><a href="#Refactor" class="headerlink" title="Refactor"></a>Refactor</h2><p>将不同的route分成单独的文件：campground，comments，index（auth）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="string">&quot;/&quot;</span>, indexRoutes);</span><br><span class="line">app.use(<span class="string">&quot;/campgrounds&quot;</span>, campgroundRoutes);</span><br><span class="line">app.use(<span class="string">&quot;/campgrounds/:id/comments&quot;</span>, commentsRoutes);</span><br></pre></td></tr></table></figure>

<p>实际的route</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router(&#123;<span class="attr">mergeParams</span>: <span class="literal">true</span>&#125;);</span><br><span class="line"><span class="comment">//使用router代替所有的app</span></span><br></pre></td></tr></table></figure>

<p>改变comment的author name架构</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> commentSchema = monggose.Schema(&#123;</span><br><span class="line">  text: <span class="built_in">String</span>,</span><br><span class="line">  author: &#123;</span><br><span class="line">    id: &#123;</span><br><span class="line">      type: mongoose.Schema.Types.ObjectId,</span><br><span class="line">      ref: <span class="string">&quot;User&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    username: <span class="built_in">String</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">comment.author.id = req.user._id;</span><br><span class="line">comment.author.username = req.user.username;</span><br><span class="line">comment.save();</span><br><span class="line">campground.comments.push(comment);</span><br><span class="line">campground.save();</span><br></pre></td></tr></table></figure>

<h2 id="method-override"><a href="#method-override" class="headerlink" title="method override"></a>method override</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(methodOverride(<span class="string">&quot;_method&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>PUT</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (currentUser &amp;&amp; campground.author.id.equals(currentUser._id))&#123; %&gt;&lt;!--存在且是创建者--&gt;</span><br><span class="line">    &lt;form action &#x3D; &quot;&#x2F;campgrounds&#x2F;&lt;%&#x3D; campground._id %&gt;?_method&#x3D;PUT&quot; method&#x3D;&quot;POST&quot;&gt;</span><br><span class="line">    &lt;&#x2F;form&gt;</span><br><span class="line">    &lt;form action &#x3D; &quot;&#x2F;campgrounds&#x2F;&lt;%&#x3D; campground._id %&gt;?_method&#x3D;DELETE&quot; method&#x3D;&quot;POST&quot;&gt;</span><br><span class="line">    &lt;&#x2F;form&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">router.put(<span class="string">&quot;/:id&quot;</span>, checkCampgroundOwnership, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line"> Campground.findByIdAndUpdate(req.params.id, req.body.campground, <span class="function"><span class="keyword">function</span>(<span class="params">err, updatedCampground</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err)&#123;</span><br><span class="line">      res.redirect(<span class="string">&quot;/campgrounds&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      res.redirect(<span class="string">&quot;/campgrounds/&quot;</span> + req.params.id);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.delete(<span class="string">&quot;/:id&quot;</span>, checkCampgroundOwnership, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line"> Campground.findByIdAndRemove(req.params.id, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err)&#123;</span><br><span class="line">      res.redirect(<span class="string">&quot;/campgrounds&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      res.redirect(<span class="string">&quot;/campground&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkCampgroundOwnership</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (req.isAuthenticated())&#123;</span><br><span class="line">    Campground.findById(req.params.id, <span class="function"><span class="keyword">function</span>(<span class="params">err, foundCampground</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        res.redirect(<span class="string">&quot;back&quot;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (foundCampground.author.is.equals(req.user._id))&#123;</span><br><span class="line">          next();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          res.send(<span class="string">&quot;You do not have permission!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    res.redirect(<span class="string">&quot;back&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//所谓的back就是说当前的页面的再刷新</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#delete-form</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline;<span class="comment">/*因为form不是inline，所以我们写一个css将button放在同一行的时候需要这样写*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>隐藏edit和delete按钮</li>
<li>阻止非创建用户使用按钮的功能</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果我们将要require的文件命名为index.js，我们直接require所在的文件夹就行，因为会默认寻找这个文件</span></span><br><span class="line"><span class="keyword">var</span> middleware = <span class="built_in">require</span>(<span class="string">&quot;../middleware&quot;</span>);</span><br><span class="line"><span class="comment">//实际上是在使用 middleware/index.js</span></span><br></pre></td></tr></table></figure>

<h2 id="Flash-Message"><a href="#Flash-Message" class="headerlink" title="Flash Message"></a>Flash Message</h2><p>show it once</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flash = <span class="built_in">require</span>(<span class="string">&quot;connect-flash&quot;</span>);</span><br><span class="line"></span><br><span class="line">app.use(flash());</span><br></pre></td></tr></table></figure>

<p>在需要的地方</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">req.flash(<span class="string">&quot;error&quot;</span>, <span class="string">&quot;Please login first&quot;</span>);</span><br><span class="line"><span class="comment">//在redirect前flash，而且flash会实际发生在redirect的网页上</span></span><br><span class="line">res.redirect(<span class="string">&quot;/login&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>)</span>&#123;</span><br><span class="line">  res.locals.currentUser = req.user;</span><br><span class="line">  res.locals.error = req.flash(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">  res.locals.success = req.flash(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">  next();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&quot;/login&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">  res.render(<span class="string">&quot;login&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (error &amp;&amp; error.length &gt; 0)&#123; %&gt;</span><br><span class="line">&lt;div class &#x3D; &quot;alert alert-danger&quot; role &#x3D; &quot;alert&quot;&gt;</span><br><span class="line">  &lt;%&#x3D; error %&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line">&lt;% if (success &amp;&amp; success.length &gt; 0)&#123; %&gt;</span><br><span class="line">&lt;div class &#x3D; &quot;alert alert-success&quot; role &#x3D; &quot;alert&quot;&gt;</span><br><span class="line">  &lt;%&#x3D; success %&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">req.flash(<span class="string">&quot;error&quot;</span>, err.message);</span><br><span class="line"><span class="comment">//利用已有的 err 的 message</span></span><br></pre></td></tr></table></figure>

<h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><p>在需要git的文件夹内，运行命令行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br></pre></td></tr></table></figure>
<p>如果运行 git status，我们会得到</p>
<p>on branch master 意味着我们是master</p>
<p>Untracked files:</p>
<p>git不会自动把所在的文件夹里的所有文件track。使用git add来添加需要track的文件。每一次更改文件，我们都需要将更改的文件重新add一次，因为commit的文件是刚刚add的文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add app.js</span><br></pre></td></tr></table></figure>
<p>-m 提示要添加commit信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m &quot;add app.js file&quot;</span><br></pre></td></tr></table></figure>
<p>一个.意味着添加所有not staged changed file</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add .</span><br></pre></td></tr></table></figure>
<p>所有的commit记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br></pre></td></tr></table></figure>
<p>我们回看某一个commit的状态，只是回看所以master仍然停留在原位，我们现在是Head在前面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout (xxx-id)</span><br></pre></td></tr></table></figure>
<p>程序员很少直接revert回很早之前的地方，不过也有这样的代码，善用谷歌</p>
<h2 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h2><p>在命令行中使用 Heroku</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ heroku login -i</span><br></pre></td></tr></table></figure>
<p>填写邮件和密码信息</p>
<p>使用git init，git add 和 git commit来做好准备，之后</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ heroku create</span><br></pre></td></tr></table></figure>
<p>这个时候 heroku 只是知道我们想要创建一个 app，但是具体的内容还是不清楚的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -v</span><br><span class="line"></span><br><span class="line">$ git push heroku master</span><br></pre></td></tr></table></figure>
<p>debug heroku，我们缺失了start.js因为在cloud9里面我们是通过node app.js启动的，但是单纯上传所有的文件并不能做到这些。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ heroku logs</span><br></pre></td></tr></table></figure>
<p>我们需要在package.json里添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">​    &quot;start&quot;: &quot;node app.js&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以使用 heroku run ls来命令远程的heroku运行一些命令行</p>
<h2 id="MongoLab"><a href="#MongoLab" class="headerlink" title="MongoLab"></a>MongoLab</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mongoose.connect(<span class="string">&quot;mongodb://localhost/yelp_camp&quot;</span>);</span><br><span class="line"><span class="comment">//更改成mongolab的形式，登陆后自网站上获取</span></span><br><span class="line">mongoose.connect(<span class="string">&quot;mongodb://#username:#password@ds055525.mongolab.com:55525/yelpcamp&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>在cloud9的命令行里输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ export DATABASEURL&#x3D;mongodb:&#x2F;&#x2F;localhost&#x2F;yelp_camp</span><br></pre></td></tr></table></figure>
<p>在heroku更改”Settings -&gt; Config Variables -&gt; KEY &amp; VALUE”</p>
<p>然后把上面的代码改成</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> url = process.env.DATABASEURL || <span class="string">&quot;mongodb://localhost/yelp_camp&quot;</span>;</span><br><span class="line"><span class="comment">//第二个是在参数不存在的时候给一个hard code 来避免报错</span></span><br><span class="line">mongoose.connect(url);</span><br></pre></td></tr></table></figure>

<p>这样的话，即使我们将这个packge开源，别人也不会知道我的mongolab的数据库里的账号密码。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/08/04/BackEnd-notes/" data-id="ckdfdtzl400010vqv9iuuh3nr" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-FrontEnd-notes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/04/FrontEnd-notes/" class="article-date">
  <time datetime="2020-08-04T03:25:58.000Z" itemprop="datePublished">2020-08-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/04/FrontEnd-notes/">FrontEnd notes</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Front-End-VS-Back-End"><a href="#Front-End-VS-Back-End" class="headerlink" title="Front End VS Back End"></a>Front End VS Back End</h2><ol>
<li>Front End: see and interact: HTML, CSS, JS</li>
<li>Back End: everything else</li>
<li>像一个餐厅：backend是厨房，frontend是摆盘和服务员</li>
</ol>
<p>static page/ dynamic page (javascript)</p>
<blockquote>
<p>html 规定了网页的skeleton，最低限度的美观</p>
<p>css 是皮肤，给html装上不同的装扮</p>
<p>javascript是用于各种不同的交互的（比如button的响应）</p>
</blockquote>
<h2 id="HTML-file"><a href="#HTML-file" class="headerlink" title="HTML file"></a>HTML file</h2><p>每个html都应该有的东西，DOCTYPE，head（title），body</p>
<p>title的作用是用于搜索引擎索引和浏览器的tab</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Metadata here --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Content--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们可以看到<b>是一个inline tag而<p>是一个blcok tag。当然，现在我们已经不用<b>这种过时的方法了，它还可以用，但是已经不再流行，可以用<strong>来代替。就正如<i>被<em>（emphasis）代替一样，因为他给我带来了更多一点点的meaning而不是单纯的改变格式。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>red<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>blue<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在写tag的时候，可以写li然后摁一下tab键，电脑会自动补全前后两个</p>
<p>div和span的区别，span是inline的container，div是一个block的container。我们可以把多个不同的elements组合在一起，比如说在他们的背后加上相同的背景这样的工作。</p>
<h2 id="Attributes"><a href="#Attributes" class="headerlink" title="Attributes"></a>Attributes</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;pic1.png&quot;</span>&gt;</span> <span class="comment">&lt;!--单边的，在里面用=给attribute赋值--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span> = <span class="string">&quot;url&quot;</span>&gt;</span> link text<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="comment">&lt;!--这里的url需要指定protocol，比如说http的例子：http://www.google.com/。因为不指定的话，他就会认为是同一个local地址下的内容--&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Table"><a href="#Table" class="headerlink" title="Table"></a>Table</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="comment">&lt;!--这个是row--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Head1<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="comment">&lt;!--这个是head--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Head2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="comment">&lt;!--这个是row--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>Red<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="comment">&lt;!--这个是cell--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>Orange<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>Yellow<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>Green<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Form"><a href="#Form" class="headerlink" title="Form"></a>Form</h2><p>谷歌，登陆facebook都需要form去和database交互</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--action where form data send data to--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--method HTTP method get/ post--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span> = <span class="string">&quot;/sign-in-url&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--all inputs here, name = 提交的内容的名字，type是在html上显示的样式，placeholder是占位符--&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;firstName&quot;</span>&gt;</span>First Name: <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span> = <span class="string">&quot;firstName&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">required</span>&gt;</span><span class="comment">&lt;!--使用text就是明文的，password会用点点隐藏输入的内容--&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span> = <span class="string">&quot;email&quot;</span>&gt;</span>Email:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span> = <span class="string">&quot;email&quot;</span> <span class="attr">type</span> = <span class="string">&quot;email&quot;</span> <span class="attr">placeholder</span> = <span class="string">&quot;email&quot;</span>&gt;</span><span class="comment">&lt;!--类型email会使得浏览器检查输入是否合法--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span> = <span class="string">&quot;password&quot;</span>&gt;</span>Username:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span> = <span class="string">&quot;Password&quot;</span> <span class="attr">id</span> = <span class="string">&quot;Password&quot;</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">pattern</span> = <span class="string">&quot;.&#123;5, 10&#125;&quot;</span> <span class="attr">required</span> <span class="attr">title</span> = <span class="string">&quot;Password must be between 5 to 10 characters&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--require意味着浏览器会检查这里是否为空，pattern意味着长度的限制，required title会提醒错误的原因--&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Do you prefer cats or dogs?<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span> = <span class="string">&quot;dogs&quot;</span>&gt;</span>Dogs: <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span> = <span class="string">&quot;petChoice&quot;</span> <span class="attr">id</span> = <span class="string">&quot;dogs&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">value</span> = <span class="string">&quot;dogs&quot;</span>&gt;</span><span class="comment">&lt;!--开了之后不能再关，只有一个选项的东西--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span> = <span class="string">&quot;cats&quot;</span>&gt;</span>Cats: <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span> = <span class="string">&quot;petChoice&quot;</span> <span class="attr">id</span> = <span class="string">&quot;cats&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">value</span> = <span class="string">&quot;cats&quot;</span>&gt;</span><span class="comment">&lt;!--因为用了同一个name，所以html知道用户只能选一个，value的作用是在按下最后一个button的时候传递这个选项真正的值--&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>what is your favorite color?<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span> = <span class="string">&quot;color&quot;</span>&gt;</span> <span class="comment">&lt;!--这个是选项在传输的时候的名字--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span> = <span class="string">&quot;R&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span>Red<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span> = <span class="string">&quot;O&quot;</span>&gt;</span>Orange<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span> = <span class="string">&quot;Y&quot;</span>&gt;</span>Yellow<span class="tag">&lt;/<span class="name">option</span>&gt;</span><span class="comment">&lt;!--value是我们想要在传输的时候的值--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span> = <span class="string">&quot;paragraph&quot;</span> <span class="attr">row</span> = <span class="string">&quot;10&quot;</span> <span class="attr">col</span> = <span class="string">&quot;50&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">checked</span>&gt;</span><span class="comment">&lt;!--可以select和deselect的功能--&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span>&gt;</span></span><br><span class="line">    Login</span><br><span class="line">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><p>找颜色的时候，用hex的方式写出来，默认的颜色方案几乎没有人用，使用color picker就行。rgba里的a是0～1的。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#FF0000</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">6</span>);</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">56</span>fx;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">100</span>, <span class="number">80</span>);</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(http://www.eason.com/);</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">border-color</span>: purple;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">5px</span> solid purple; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1 我们可以把css写到html里面，就像一个inline的attribute一样 style=“color：purple;”。非常不推荐这样，费时费力的同时还把内容和格式搅和在一起。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">sytle</span> <span class="attr">type</span> = <span class="string">&quot;text.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--2. html里的放css的用法--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">sytle</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--分离的做法：推荐！href是css文件的地方--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span> = <span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span> = <span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;app.css&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--使用google fonts--&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://fonts.googleapis.com/css2?family=Indie+Flower&amp;family=Raleway&amp;display=swap&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>id &amp; class</strong></p>
<p>在html里加上class = “highlight” 或者 id = “special”</p>
<p>在css里加上</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#special</span>&#123;</span><br><span class="line">    <span class="comment">/*id*/</span></span><br><span class="line">&#125;</span><br><span class="line">. <span class="selector-tag">highlight</span> &#123;</span><br><span class="line">    <span class="comment">/*class*/</span></span><br><span class="line">  <span class="attribute">text-decoration</span>: line-through;</span><br><span class="line">&#125;</span><br><span class="line">* &#123;</span><br><span class="line">  <span class="comment">/*全选*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="comment">/*所有的在 li 的 a*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h4</span> + <span class="selector-tag">ul</span>&#123;</span><br><span class="line">  <span class="comment">/*并列的，有先后顺序的*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span> <span class="selector-attr">[type=<span class="string">&quot;checkbox&quot;</span>]</span>&#123;</span><br><span class="line">  <span class="comment">/*attribute selector*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span><span class="selector-pseudo">:nth-of-type(3)</span>&#123;</span><br><span class="line">  <span class="comment">/*选第三个*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>css的逻辑：从上往下跑，所以最后出现的改动会覆盖前面的。另外所有的元素都会继承更大的部分，比如所有元素之于body，li之于ul。css specification的优先级是：id &gt; class &gt; li &gt; ul 越具体的优先级越高。specificity calculator 可以计算。</p>
<p><strong>fonts</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Arial;</span><br><span class="line">  <span class="attribute">line-height</span>:<span class="number">2</span>;<span class="comment">/*两倍行距*/</span></span><br><span class="line">  <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="comment">/*span是用于highlight一部分，也就是inline的一种选择*/</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2.0em</span>;</span><br><span class="line">  <span class="comment">/*两倍大小于默认大小，可以先设置body的font size，这样我们就可以知道“默认”有多大*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span>&#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">100</span>~<span class="number">800</span>; <span class="comment">/*只有一部分的字体提供整百粗细的调整*/</span></span><br><span class="line">  <span class="attribute">text-align</span>: center; <span class="comment">/*中心对齐*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  he is a <span class="tag">&lt;<span class="name">span</span>&gt;</span>student!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>![截屏2020-06-20下午7.27.05](/Users/easonchiu/Library/Application Support/typora-user-images/截屏2020-06-20下午7.27.05.png)</p>
<p>调节padding可以调整border到element的距离，margin是调节element之间的距离。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;<span class="comment">/*50%的parent element width*/</span></span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid blue;<span class="comment">/*如果不具体指定的话，那么border的宽度将会是屏幕的宽度，这是被p元素所定义的*/</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto <span class="number">0</span> auto; <span class="comment">/*居中*/</span></span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto; <span class="comment">/*居中*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>九宫格的实现</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span> = <span class="string">&quot;text/css&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    table &#123;</span><br><span class="line"><span class="css">      <span class="selector-tag">margin</span>: <span class="selector-tag">auto</span>; <span class="comment">/**居中**/</span></span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    td &#123;</span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 100px;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="css">    <span class="selector-class">.vertical</span>&#123;</span></span><br><span class="line">      border-left: 1px solid black;</span><br><span class="line">      border-right: 1px solid black;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="css">    <span class="selector-class">.horizontal</span>&#123;</span></span><br><span class="line">      border-top: 1px solid black;</span><br><span class="line">      border-botton: 1px solid black;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span> = <span class="string">&quot;vertical&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span> = <span class="string">&quot;horizontal&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span> = <span class="string">&quot;vertical horizontal&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span> <span class="comment">&lt;!--有多个class的时候用空格分开--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span> = <span class="string">&quot;horizontal&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span> = <span class="string">&quot;vertical&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="BootStrap"><a href="#BootStrap" class="headerlink" title="BootStrap"></a>BootStrap</h2><p>几个值得注意的点</p>
<ol>
<li>对于button来说，我们只要简单地加上class = “btn btn-success active”这样的class，就能拥有很好看的button外观。</li>
<li>可以使用Jumbotron来突出显示一些内容</li>
<li>利用form-group和form-control，可以让表单的外观更为好看</li>
<li>Grid ；12</li>
<li>有四种设备屏幕大小：col-xs-, .col-sm-, col-md-, .col-lg-分别代表了extra small，small，medium，large</li>
</ol>
<h2 id="BootStrap-4-0-值得关注的新功能"><a href="#BootStrap-4-0-值得关注的新功能" class="headerlink" title="BootStrap 4.0 值得关注的新功能"></a>BootStrap 4.0 值得关注的新功能</h2><ol>
<li>card</li>
<li>dropdown有改变</li>
<li>color：class=”text-primary”, “text-warning”…</li>
<li>display-1, 2, 3, 4 非常大的默认字体，对应的是按比例的6rem</li>
<li>/<blockquote class="blockquote"> &amp; <blockquote class="blockquote text-right"></li>
<li>/<h5 class="border border-danger rounded-top"> 红圆上 &amp;<h5 class="border border-left-0 border-warning"> 黄无左</li>
<li>/<button class="btn btn-info p-0"> p-1, p-2, p-3, p-4, p-5 越来越大的padding。还有指定哪一条边 <button class="btn btn-info pt-5"></li>
<li>/<p class="bg-success text-white m-0">m-0 ～ m-5</li>
<li>Break Points：/<button class="btn btn-warning p-sm-5 p-md-0 p-lg-5 p-xl-0"> 从xs开始屏幕变大：按键的padding小大小大小。</li>
<li>/<button class="btn btn-primary p-4 mx-0 mx-sm-2 mx-md-3 mx-lg-4 mx-xl-5"> 调整margin</li>
<li>nav有改变：要指定背景的颜色了，还要指定什么时候expand小汉堡</li>
<li>/<h1 class="d-xl-none"> xl的时候隐藏</li>
<li><strong>FlexBox</strong>是一种positioning的技术，一般来说就是使得内容能够在box里放置在具体的位置（<strong>justified content</strong>-）center/ between/ end/ around（main access 从左到右）</li>
<li><strong>align-items</strong>-start（从上到下）-center/ -end</li>
<li>flex-row-reverse（从右到左）flex-column（以列为主要的方向）</li>
<li>在nav这样的组件里面已经默认使用了flex，可以做自适应，还有tab </li>
<li><strong>align-self</strong>-start：单独控制的override</li>
<li>order-md-2</li>
</ol>
<h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><ol>
<li>引号的使用：单引双引都可以，但是如果我们要在string里面使用引号就要用另一种引号或者用\转义，要打\的时候用\转义就行</li>
<li>String可以相加，concatenation</li>
<li>可以”hello”[0] = “h” “hi\（\）”.length = 3</li>
<li>var name = “Rusty”</li>
<li>Declared but not initialized: var age; undefined</li>
<li>explicitly empty: currentPlayer = null;</li>
<li>// 在js里是comment的意思</li>
<li>clear() console</li>
<li>alert(“Hello There”);</li>
<li>console.log(213123);</li>
<li>var userName = prompt(“what is your name?”) pop up windowns and get answer</li>
<li>script的位置就是它们运行的先后顺序，如果放在head，那它会在html的实际内容运行之前运行</li>
<li>=== 类型和内容相同 5 == “5” true == “1” 0 == false null == undefined (NaN == NaN) = false</li>
<li>对于“”，null，0，NaN，undefined来说是false，对于任何有实质内容的string都是true，即使是“false”也是true</li>
<li>while (conditional statement){}</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">-10</span>;</span><br><span class="line"><span class="keyword">while</span> (num &lt; <span class="number">20</span>)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(num);</span><br><span class="line">  num++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">num = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">while</span> (num &lt;= <span class="number">40</span>)&#123;</span><br><span class="line">  <span class="keyword">if</span> (num % <span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> count = <span class="number">0</span>; count &lt; <span class="number">6</span>; count++)&#123;</span><br><span class="line">  <span class="comment">//for loop count is not global as while loop</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hi</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//在JS里，如果你在调用方程的时候没有给出argument的话，程序会给他们undefined，继续运行</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;hi there&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">setInterval</span>(aFunc, <span class="number">1000</span>); <span class="comment">//每一秒运行一次aFunc，注意这里不用加上括号</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;This is anonymous function&quot;</span>);</span><br><span class="line">&#125;);<span class="comment">//匿名方程，只用一次的方程</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> friends = [<span class="string">&quot;Charlie&quot;</span>, <span class="string">&quot;Liz&quot;</span>, <span class="string">&quot;David&quot;</span>, <span class="string">&quot;Mattias&quot;</span>];</span><br><span class="line">friends[<span class="number">4</span>] = <span class="string">&quot;Amelie&quot;</span>;<span class="comment">//增加新的</span></span><br><span class="line">friends.push(<span class="string">&quot;Amelie&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> friend = colors.pop();</span><br><span class="line">friends.unshift(<span class="string">&quot;Eason&quot;</span>);<span class="comment">//加在最前面</span></span><br><span class="line">friends.shift(<span class="string">&quot;Sherry&quot;</span>);<span class="comment">//加在最后面</span></span><br><span class="line">friends.indexOf(<span class="string">&quot;Eason&quot;</span>);<span class="comment">//不存在的话就是-1</span></span><br><span class="line"><span class="keyword">var</span> subFriends = slice(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">friends.splice(index, <span class="number">1</span>);<span class="comment">//从哪里开始删除，删几个？</span></span><br><span class="line"></span><br><span class="line">friends.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">friend</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(friend);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> friends = [];</span><br><span class="line"><span class="keyword">var</span> friends = <span class="keyword">new</span> <span class="built_in">Array</span>();<span class="comment">//不常用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//New Object Approach 1 </span></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  name: <span class="string">&quot;Cindy&quot;</span>,</span><br><span class="line">  age: <span class="number">32</span>,</span><br><span class="line">  city: <span class="string">&quot;Missoula&quot;</span>,</span><br><span class="line">  <span class="comment">//object里面也可以有function，使用它们等同于console.log();</span></span><br><span class="line">  add: <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//New Object Approach 2 </span></span><br><span class="line"><span class="keyword">var</span> person = &#123;&#125;;</span><br><span class="line">person.name = <span class="string">&quot;Travis&quot;</span>;</span><br><span class="line">person.age = <span class="number">21</span>;</span><br><span class="line">person.city = <span class="string">&quot;LA&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//New Object Approach 3</span></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">person.name = <span class="string">&quot;Travis&quot;</span>;</span><br><span class="line">person.age = <span class="number">21</span>;</span><br><span class="line">person.city = <span class="string">&quot;LA&quot;</span>;</span><br><span class="line"><span class="comment">//person.age 等同于 person[&quot;age&quot;]，注意这个双引号是必须的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> movies = [</span><br><span class="line">  &#123;</span><br><span class="line">    titlew: <span class="string">&quot;In Bruges&quot;</span>,</span><br><span class="line">    hasWatched: <span class="literal">true</span>,</span><br><span class="line">    rating: <span class="number">5</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: <span class="string">&quot;Frozen&quot;</span>,</span><br><span class="line">    hasWatched: <span class="literal">false</span>,</span><br><span class="line">    rating: <span class="number">4.5</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment">//&quot;\&quot;&quot; = &quot; 因为前后两个双引号代表了string，第二个双引号前面用\转义告诉电脑不要在这里停下来</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//movies是一个装满了movie object的array，对每一个object进行forEach loop并通过anonymous function操作movie object</span></span><br><span class="line">movies.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">movie</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(buildString(movie));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>answer.indexOf(“yes”) == -1 意味着这个answer里面不含有yes这个子字符串</p>
<p>object 类似于 dictionary, key都是string</p>
<p>this有什么用，就是在object里面的function需要调用这一个object内部的数据的时候，需要加上this.data</p>
<h2 id="DOM-Document-Object-Model"><a href="#DOM-Document-Object-Model" class="headerlink" title="DOM (Document Object Model)"></a>DOM (Document Object Model)</h2><p>console.dir(document)可以看到javascript将html看作一个巨大的object</p>
<p>最重要的是养成一种心态：就是对于自己不知道所有的东西感到comfortable，因为html的内容是非常多的，不可能完全搞清楚所有的地方。</p>
<p><strong>select + manipulate</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> h1 = <span class="built_in">document</span>.querySelector(<span class="string">&quot;h1&quot;</span>); <span class="comment">//select</span></span><br><span class="line">h1.style.color = <span class="string">&quot;pink&quot;</span>; <span class="comment">//manipulate</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> isBlue = <span class="literal">false</span>;</span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isBlue)&#123;</span><br><span class="line">    h1.style.background = <span class="string">&quot;white&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span>&#123;</span><br><span class="line">    h1.style.background = <span class="string">&quot;#3498db&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  isBlue = !isBlue;</span><br><span class="line">&#125;, <span class="number">1000</span>); <span class="comment">//每一秒变换一下颜色</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&quot;highlight&quot;</span>); = <span class="built_in">document</span>.querySeletor(<span class="string">&quot;#highlight&quot;</span>); <span class="comment">//就是使用css selector来选择，只返回第一个符合条件的</span></span><br><span class="line"><span class="built_in">document</span>.getElementByClass();</span><br><span class="line"><span class="built_in">document</span>.getElementByTagName(); <span class="comment">//class可能会有成千上万的element有相同的tag比如说&lt;p&gt;</span></span><br><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;.bolded&quot;</span>);<span class="comment">//返回所有的，也可以用这个选择id，但是返回的是只有一个object的array</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//style</span></span><br><span class="line">h1.style.color = <span class="string">&quot;yellow&quot;</span>;</span><br><span class="line">h1.style.background = <span class="string">&quot;blue&quot;</span>;</span><br><span class="line">h1.style.border = <span class="string">&quot;5px solid pink&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//turn on/ off .css</span></span><br><span class="line">h1.classList.add(<span class="string">&quot;big&quot;</span>)</span><br><span class="line">h1.classList.remove(<span class="string">&quot;big&quot;</span>)</span><br><span class="line">h1.classList.toggle(<span class="string">&quot;big&quot;</span>)<span class="comment">//切换成关/开</span></span><br><span class="line">h1.textContent = <span class="string">&quot;blah&quot;</span>; <span class="comment">//用这种方法会override所有的inline tag</span></span><br><span class="line">h1.innerHtml = <span class="string">&quot;&lt;strong&gt;blah&lt;/strong&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> img = <span class="built_in">document</span>.getElementsbyTagName(<span class="string">&quot;img&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">img.setAttribute(<span class="string">&quot;src&quot;</span>, <span class="string">&quot;http://image.jpg&quot;</span>);</span><br><span class="line">a.setAttribute(<span class="string">&quot;href&quot;</span>, <span class="string">&quot;http://www.google.com&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> button = <span class="built_in">document</span>.querySelector(<span class="string">&quot;button&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> paragraph = <span class="built_in">document</span>.querySelector(<span class="string">&quot;p&quot;</span>);</span><br><span class="line">button.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  paragraph.textContent = <span class="string">&quot;Button has been clicked!&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//学会使用&lt;span&gt;来inline选择一部分</span></span><br><span class="line"><span class="keyword">var</span> numInput = <span class="built_in">document</span>.querySelector(<span class="string">&quot;input&quot;</span>);</span><br><span class="line">numInput.addEventListener(<span class="string">&quot;change&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  winningScoreDisplay.textContent = <span class="built_in">this</span>.value;<span class="comment">//.value是取出来的输入值</span></span><br><span class="line">  winningScore = <span class="built_in">Number</span>(<span class="built_in">this</span>.value); <span class="comment">//强制转换成数字</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">h1.addEventListener(<span class="string">&quot;mouseover&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.style.color = <span class="string">&quot;green&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line">h1.addEventListener(<span class="string">&quot;mouseout&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.style.color = <span class="string">&quot;white&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//this = h1 here</span></span><br></pre></td></tr></table></figure>

<p>在写网站的时候，要是用很小的sprint和task的思维，也就是小步快跑，每次都简化功能去尝试效果，不要想着毕其功于一役，直接跳到最终的版本。而是先做一些hard code，慢慢改进到最终版本。这样做的好处是随时有一个可用可看的版本，而且不会在最终的版本出错的时候，不知道错误可能出现在哪里。</p>
<h2 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;img&quot;</span>) <span class="comment">//select all &lt;img&gt; tag</span></span><br><span class="line">$(<span class="string">&quot;.sale&quot;</span>) <span class="comment">//class sale</span></span><br><span class="line">$(<span class="string">&quot;#bonus&quot;</span>) <span class="comment">// id bonus</span></span><br><span class="line">$(<span class="string">&quot;li a&quot;</span>) <span class="comment">//all &lt;a&gt; tag inside li</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;h1&quot;</span>).css(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;yellow&quot;</span>); = <span class="built_in">document</span>.querySelector(<span class="string">&quot;h1&quot;</span>).style.color = <span class="string">&quot;yellowj&quot;</span>;</span><br><span class="line">$(<span class="string">&quot;div:first-of-type&quot;</span>).css(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;pink&quot;</span>); = $(<span class="string">&quot;div:first&quot;</span>).css(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;pink&quot;</span>); <span class="comment">//选择第一个div，后者是jQuery的方法，前者是css的，前者更快</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;li&quot;</span>).text();<span class="comment">//返回所有的&lt;li&gt;内容，中间直接相连</span></span><br><span class="line">$(<span class="string">&quot;h1&quot;</span>).text(<span class="string">&quot;new text&quot;</span>); <span class="comment">//传参数的时候可以直接更改所显示的文字，而且是所有的h1</span></span><br><span class="line">$(<span class="string">&quot;ul&quot;</span>).html();<span class="comment">//返回&lt;ul&gt;的所有内容，html格式的</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;img&quot;</span>).attr(<span class="string">&quot;src&quot;</span>, <span class="string">&quot;http://www.google.com&quot;</span>);<span class="comment">//改变单个attribute</span></span><br><span class="line">$(<span class="string">&quot;#greatphoto&quot;</span>).attr(&#123;</span><br><span class="line">  alt: <span class="string">&quot;Beijing Brush Seller&quot;</span>,</span><br><span class="line">  title: <span class="string">&quot;photo by Kelly Clark&quot;</span></span><br><span class="line">&#125;);<span class="comment">//一次调整多个attribute</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;select&quot;</span>).val()<span class="comment">//从input/ select（dropdown）里取出内容</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;h1&quot;</span>).addClass(<span class="string">&quot;correct&quot;</span>);</span><br><span class="line">$(<span class="string">&quot;h1&quot;</span>).removeClass(<span class="string">&quot;correct&quot;</span>);</span><br><span class="line">$(<span class="string">&quot;h1&quot;</span>).toggleClass(<span class="string">&quot;correct&quot;</span>);</span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;li&quot;</span>).first()<span class="comment">//首</span></span><br><span class="line">$(<span class="string">&quot;li&quot;</span>).last()<span class="comment">//尾</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;button&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="built_in">this</span>).css(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;pink&quot;</span>);<span class="comment">//.css()是一个jQuery method，所以我们要保证调用者也是一个jQuery object（$(this)）</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">.keydown()</span><br><span class="line">.keyup()</span><br><span class="line">.keypress()</span><br><span class="line"><span class="comment">//如果是shift + a = keypress()会得到A，而up/down只会得到摁键本身</span></span><br><span class="line">$(<span class="string">&quot;input&quot;</span>).keypress(<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (event.which === <span class="number">13</span>)&#123;</span><br><span class="line">    <span class="comment">//hit enter</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">on() 类似于 addEventListener()</span><br><span class="line">$(<span class="string">&#x27;button&#x27;</span>).on(<span class="string">&quot;mouseenter&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);</span><br><span class="line">$(<span class="string">&#x27;button&#x27;</span>).on(<span class="string">&quot;mouseleave&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);</span><br><span class="line">$(<span class="string">&#x27;button&#x27;</span>).on(<span class="string">&quot;dblclick&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;button&quot;</span>).on(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">&quot;div&quot;</span>).fadeOut(<span class="number">1000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="built_in">this</span>).remove();<span class="comment">//remove object after fade out</span></span><br><span class="line">  &#125;);<span class="comment">//1000ms = 1s</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//also .fadeIn() .slideToggle() .slideDown() .slideUp() 往下/往上收起</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/08/04/FrontEnd-notes/" data-id="ckdfdtzl500020vqv8u31bu6k" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Vue-js-note" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/04/Vue-js-note/" class="article-date">
  <time datetime="2020-08-04T02:12:39.000Z" itemprop="datePublished">2020-08-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/04/Vue-js-note/">Vue.js note</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h2><p>vue集合了React和Angular的优点：模块化开发（Angular）和React（虚拟dom）</p>
<p>虚拟DOM的意思就是</p>
<p>css可以使用less来写，less本身不是css，但是可以编译成css</p>
<p><strong>webpack</strong> 打包工具，做不同的版本适配（ES5，ES6等），有些语法在低等标准中需要转换</p>
<p><strong>Typescript</strong>：编程完打包成一个javascript</p>
<p><strong>Axios</strong>：前端通信框架</p>
<p>React/ (Vue + Weex): can develop mobile app</p>
<p>Vue focus on V in “MVC” (font end page)</p>
<p>History: normal JS -&gt; </p>
<p>JQuery (Improved compatibility with different browsers) -&gt;</p>
<p>Template engine (node.js + ejs, DOM manipulations, reload the whole page) -&gt; </p>
<p>Angular/ Vue (AJAX, save unnecessary DOM manipulation automatically)</p>
<h2 id="Framework-vs-Library"><a href="#Framework-vs-Library" class="headerlink" title="Framework vs Library"></a>Framework vs Library</h2><p>Framework: a complete solution, can’t change it without painful loss (node.js express)<br>Library: very small and specific function, change it is very common and easy</p>
<h2 id="MVC-in-Backend"><a href="#MVC-in-Backend" class="headerlink" title="MVC in Backend"></a>MVC in Backend</h2><p>Model (Database) Visual (what user see) Control (controller + route)</p>
<p>view layer: business manipulation, request via network to backend -&gt;</p>
<p>[app.js: entry of the project -&gt;</p>
<p>(router.js: route function -&gt;</p>
<p>controller.js: business logic -&gt;) //controller layer</p>
<p>model.js: CRUD database //model layer]</p>
<h2 id="MVVM-in-Frontend"><a href="#MVVM-in-Frontend" class="headerlink" title="MVVM in Frontend"></a>MVVM in Frontend</h2><p>M (data in every single page)</p>
<p>VM (mediator between M &amp; V, while V need data or input data) 数据的双向绑定</p>
<p>V (HTML structure)</p>
<h2 id="First-Vue-Page"><a href="#First-Vue-Page" class="headerlink" title="First Vue Page"></a>First Vue Page</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--1. apply this--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">      <span class="selector-attr">[v-cloak]</span>&#123;</span></span><br><span class="line">      display: none;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--&quot;V&quot;--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span> = <span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2. add this attribute--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-cloak</span>&gt;</span></span><br><span class="line">      ===&#123;&#123;msg&#125;&#125;===</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-text</span> = <span class="string">&quot;msg&quot;</span>&gt;</span></span><br><span class="line">      inital text</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span> = <span class="string">&quot;&lt;h1&gt;Big text&lt;/h1&gt;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="comment">//&quot;VM&quot;</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">      el: <span class="string">&#x27;#app&#x27;</span>, <span class="comment">//el means control which area in the page</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//data here is &quot;M&quot;</span></span></span><br><span class="line">      data: &#123;</span><br><span class="line"><span class="javascript">        msg: <span class="string">&#x27;Welcome to Vue&#x27;</span><span class="comment">//双向绑定，not recommend to manually update the content in page</span></span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>差值表达式：”===”会保持显示不会被代替，上面的差值表达式有这个问题</p>
<p>v-text：initial text display 在 v-text 取代前显示，v-text默认没有闪烁问题</p>
<p>v-html：会把参数内容作为一个html内容来处理，上面两个是作为string来处理的</p>
<h2 id="改变chorme的网速"><a href="#改变chorme的网速" class="headerlink" title="改变chorme的网速"></a>改变chorme的网速</h2><ol>
<li>右键 检查</li>
<li>network</li>
<li>online -&gt; slow 3G（可以测试在网速慢的情况下的状态）</li>
</ol>
<h2 id="v-bind-缩写"><a href="#v-bind-缩写" class="headerlink" title="v-bind 缩写 :"></a>v-bind 缩写 :</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;button&quot;</span> <span class="attr">value</span> = <span class="string">&quot;click me&quot;</span> <span class="attr">v-bind:title</span> = <span class="string">&quot;mytitle + &#x27; and more&#x27;&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--想在这里用data定义的数字需要&quot;bind:&quot;这样它就知道要将它当作js来看待，去data里找mytitle--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--只能从M层到V层，不是双向绑定--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line">    data : &#123;</span><br><span class="line"><span class="javascript">      mytitle: <span class="string">&#x27;Self defined title value&#x27;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="v-on-缩写"><a href="#v-on-缩写" class="headerlink" title="v-on 缩写 @"></a>v-on 缩写 @</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;button&quot;</span> <span class="attr">value</span> = <span class="string">&quot;click me&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;show&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;button&quot;</span> <span class="attr">value</span> = <span class="string">&quot;click me&quot;</span> <span class="attr">v-on:mouseover</span>=<span class="string">&quot;show&quot;</span>&gt;</span><span class="comment">&lt;!--hover--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line">    methods:&#123;</span><br><span class="line"><span class="javascript">      <span class="comment">//define all methods for this Vue instance</span></span></span><br><span class="line"><span class="javascript">        show: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        alert(<span class="string">&#x27;Hello&#x27;</span>)</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>v-on: 绑定的事件如果不记得只要查jQuery就行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--单选--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;radio&quot;</span> <span class="attr">name</span> = <span class="string">&quot;sex&quot;</span> <span class="attr">value</span> = <span class="string">&quot;male&quot;</span> <span class="attr">v-model</span> = <span class="string">&quot;sex&quot;</span>&gt;</span> Male</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;radio&quot;</span> <span class="attr">name</span> = <span class="string">&quot;sex&quot;</span> <span class="attr">value</span> = <span class="string">&quot;female&quot;</span> <span class="attr">v-model</span> = <span class="string">&quot;sex&quot;</span>&gt;</span> Female</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  Pick &#123;&#123;sex&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    el: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="javascript">      sex: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>下拉栏的显示</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span> = <span class="string">&quot;select&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">disabled</span>&gt;</span>--Please select--<span class="tag">&lt;/<span class="name">option</span>&gt;</span><span class="comment">&lt;!--这个只是一个默认的显示项--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>A<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>B<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>C<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line">    data : &#123;</span><br><span class="line"><span class="javascript">      select: <span class="string">&quot;&quot;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>为啥增加第一个默认不可选的选项？因为对于iOS用户来说，如果select的值不等于option里面的某一个的话，那么iOS用户将不能选择第一个option，所以我们增加一个title避免这一点</p>
<h2 id="跑马灯效果"><a href="#跑马灯效果" class="headerlink" title="跑马灯效果"></a>跑马灯效果</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="javascript">      intervalId: <span class="literal">null</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    method: &#123;</span><br><span class="line"><span class="javascript">      <span class="comment">//traditional</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//lang: function()&#123;&#125;</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">//ES6</span></span></span><br><span class="line">      lang()&#123;</span><br><span class="line"><span class="javascript">        <span class="comment">//已经有定时器了</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (<span class="built_in">this</span>.intervalId != <span class="literal">null</span>) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//在这种情况下，里面的function是取不到外面的this的</span></span></span><br><span class="line">        /* setInterval(function ()&#123;</span><br><span class="line">        &#125;, 400); */</span><br><span class="line"><span class="javascript">        <span class="comment">//使用构建函数，内部的this就指向了外部的this</span></span></span><br><span class="line"><span class="javascript">          <span class="built_in">setInterval</span>( <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> start = <span class="built_in">this</span>.msg.substring(<span class="number">0</span>, <span class="number">1</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> end = <span class="built_in">this</span>.msg.substring(<span class="number">1</span>);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.msg = end + start;</span></span><br><span class="line">        &#125;, 400);</span><br><span class="line">      &#125;，</span><br><span class="line">      stop()&#123;</span><br><span class="line"><span class="javascript">            <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.intervalId);</span></span><br><span class="line"><span class="javascript">              <span class="built_in">this</span>.intervalId = <span class="literal">null</span>;</span></span><br><span class="line">          &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在vm里要像调用data的数据或者methods里的方法，需要在前面加上this</p>
<p>vm会监听data的改变，只要data改变，画面中的渲染将会自动马上执行</p>
<h2 id="冒泡机制"><a href="#冒泡机制" class="headerlink" title="冒泡机制"></a>冒泡机制</h2><p>如果一个button在一个div里面，它们都具有@click的事件，那么根据冒泡机制（从小到大）的话，我们点击button将会先触发button后触发div的点击事件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> = <span class="string">&quot;inner&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;divHandler&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;click me&quot;</span> @<span class="attr">click.stop</span> = <span class="string">&quot;btnHandler&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>.stop就是阻止click的触发的冒泡，这个时候如果我们点击button将不会触发div的触发事件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span> = <span class="string">&quot;http://www.bing.com&quot;</span> @<span class="attr">click.prevent</span> = <span class="string">&quot;linkClick&quot;</span>&gt;</span>Bing<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>.prevent 阻止默认行为</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> = <span class="string">&quot;inner&quot;</span> @<span class="attr">click.capture</span>=<span class="string">&quot;divHandler&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;click me&quot;</span> @<span class="attr">click</span> = <span class="string">&quot;btnHandler&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>.capture 点击按钮的时候，先触发div的效果再触发button的效果</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> = <span class="string">&quot;inner&quot;</span> @<span class="attr">click.self</span>=<span class="string">&quot;divHandler&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;click me&quot;</span> @<span class="attr">click</span> = <span class="string">&quot;btnHandler&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>.self 就是说只有当用户真的点击div的时候，才触发点击的效果，其他靠冒泡和捕捉的都不执行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span> = <span class="string">&quot;http://www.bing.com&quot;</span> @<span class="attr">click.prevent.once</span> = <span class="string">&quot;linkClick&quot;</span>&gt;</span>Bing<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>.once 可以和其他的串联，意思是这种prevent操作执行一次，之后便不再prevent，once和prevent的先后顺序不影响</p>
<p>.stop 和 .self 的区别？</p>
<p>.stop 阻止了所有的冒泡活动，.self 只阻止了当前这个层次的点击事件的触发，但是冒泡可以继续进行。</p>
<h2 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h2><p>能够实现数据的双向绑定，也就是说 V - M 之间任何一个发生改变，另一个也马上同步改变。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;text&quot;</span> <span class="attr">v-model</span> = <span class="string">&quot;msg&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--值得注意的是，v-model并不需要接一个冒号和value，而是直接=我们要绑定的变量--&gt;</span></span><br></pre></td></tr></table></figure>

<p>只能用在 input (radio, text, address, email …), select, checkbox, textarea</p>
<h2 id="eval"><a href="#eval" class="headerlink" title="eval()"></a>eval()</h2><p>把string解析成JavaScript的代码来执行</p>
<h2 id="Vue-中的样式"><a href="#Vue-中的样式" class="headerlink" title="Vue 中的样式"></a>Vue 中的样式</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--普通的class + 定义--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span> = <span class="string">&quot;red thin&quot;</span>&gt;</span>Big Text<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--1. Vue 使用一个传递的数组，需要注意这里要v-bind--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">:class</span> = <span class="string">&quot;[&#x27;thin&#x27;, &#x27;italic&#x27;]&quot;</span>&gt;</span></span><br><span class="line">  Big Text</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--2. 数组中使用三元表达式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">:class</span> = <span class="string">&quot;[&#x27;thin&#x27;, &#x27;italic&#x27;, flag?&#x27;active&#x27;:&#x27;&#x27;]&quot;</span>&gt;</span></span><br><span class="line">  Big Text</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--3. 在数组中使用对象代替三元表达式，提高可读性--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">:class</span> = <span class="string">&quot;[&#x27;thin&#x27;, &#x27;italic&#x27;, &#123;&#x27;active&#x27;:flag&#125;]&quot;</span>&gt;</span></span><br><span class="line">  Big Text</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--4. 使用对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">:class</span> = <span class="string">&quot;classObj&quot;</span>&gt;</span></span><br><span class="line">  Big Text</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--相似的style也可以这样做--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;&#x27;color&#x27;:&#x27;red&#x27;, &#x27;font-size&#x27;: &#x27;40px&#x27;, &#x27;font-weight&#x27;: &#x27;200&#x27;&#125;&quot;</span>&gt;</span>Big Text<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">:style</span>=<span class="string">&quot;[styleObj1, styleObj2]&quot;</span>&gt;</span>Big Text<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="javascript">      classObj: &#123;<span class="attr">red</span>: <span class="literal">true</span>, <span class="attr">thin</span>: <span class="literal">true</span>, <span class="attr">italic</span>: <span class="literal">true</span>, <span class="attr">active</span>: <span class="literal">false</span>&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="if-else-for"><a href="#if-else-for" class="headerlink" title="if else, for"></a>if else, for</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-if</span> = <span class="string">&quot;type === &#x27;A&#x27;&quot;</span>&gt;</span></span><br><span class="line">  A</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-else-if</span> = <span class="string">&quot;type === &#x27;B&#x27;&quot;</span>&gt;</span></span><br><span class="line">  B</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">  Not pass</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in items&quot;</span>&gt;</span></span><br><span class="line">&#123;&#123;item.message&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">  el: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line">  data: &#123;</span><br><span class="line"><span class="javascript">    type: <span class="string">&#x27;A&#x27;</span>,</span></span><br><span class="line">    items: [</span><br><span class="line"><span class="javascript">      &#123;<span class="attr">message</span>: <span class="string">&#x27;m1&#x27;</span>&#125;,</span></span><br><span class="line"><span class="javascript">      &#123;<span class="attr">message</span>: <span class="string">&#x27;m2&#x27;</span>&#125;</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="定制组件-component"><a href="#定制组件-component" class="headerlink" title="定制组件 component"></a>定制组件 component</h2><p>component是什么？就是&lt;组件名&gt;</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">easonchiu</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">v-bind:eason</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">easonchiu</span>&gt;</span><span class="comment">&lt;!--2. 遍历items，3. item 与 eason 绑定--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="comment">//创建一个名为easonchiu的component</span></span></span><br><span class="line"><span class="javascript">    Vue.component(<span class="string">&quot;easonchiu&quot;</span>,&#123;</span></span><br><span class="line"><span class="javascript">    props: [<span class="string">&#x27;eason&#x27;</span>],<span class="comment">//4. 这个是接受的参数</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    template: &#x27;<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><span class="template-variable">&#123;&#123;<span class="name">eason</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span>&#x27; //5. 将这个参数放到template里面显示</span></span></span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    el: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line">    data:&#123;</span><br><span class="line"><span class="javascript">      items: [<span class="string">&quot;Java&quot;</span>, <span class="string">&quot;Linux&quot;</span>, <span class="string">&quot;Frontend&quot;</span>]<span class="comment">//1. 定义的数据</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>数据从data里的items-&gt;v-for里面的items</p>
<h2 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h2><p>本身就可以使用jQuery.ajax()来实现异步通信，不推荐jQuery因为它操作DOM太频繁</p>
<p>浏览器端和NodeJS的异步通信框架</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.axios.get(api).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(response.data)</span><br><span class="line">&#125;); <span class="comment">//ES6</span></span><br></pre></td></tr></table></figure>

<h2 id="Vue的生命周期"><a href="#Vue的生命周期" class="headerlink" title="Vue的生命周期"></a>Vue的生命周期</h2><p>new Vue() 实例化Vue对象 -&gt; init events &amp; lifecycle -&gt; 钩子 beforeCreate() -&gt; init injection &amp; reactivity -&gt; 钩子 created() -&gt; 检查el和template -&gt; 编译模版，把data对象里的数据和Vue语法声明的模版编译成浏览器可读的HTML -&gt; 钩子 beforeMount() 现在页面没有内容，还没开始挂载-&gt; 创建 vm.el 并且代替 el，用编译好的HTML替换掉 el 属性所指向的DOM -&gt; mounted() 编译好的HTML挂载到页面完成后执行的事件钩子，一般做一些ajax请求获取数据进行数据初始化，在整个实例中只会被执行一次 -&gt; VM 实时监控数据的变化，并随之更新DOM（beforeUpdate() 和 updated()）-&gt; vm.destroy() 实例销毁 -&gt; 拆除数据监听，子组件和事件监听</p>
<p>什么是钩子函数？就是预先写好的函数，不管你有没有往里面填内容，都会被执行。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span> = <span class="string">&quot;vue&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-text</span>= <span class="string">&quot;info.name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;info.name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2.6.11&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">            el: <span class="string">&quot;#vue&quot;</span>,</span></span><br><span class="line">            data()&#123;</span><br><span class="line"><span class="javascript">                <span class="keyword">return</span>&#123;</span></span><br><span class="line">                    info:&#123;</span><br><span class="line"><span class="javascript">                        name: <span class="literal">null</span></span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            mounted()&#123;</span><br><span class="line"><span class="javascript">                <span class="comment">//等同于jQuery的Ajax，链式编程</span></span></span><br><span class="line"><span class="javascript">                axios.get(<span class="string">&quot;./data.json&quot;</span>).then(<span class="function"><span class="params">response</span> =&gt;</span> (<span class="built_in">this</span>.info = response.data));</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="computed-计算属性"><a href="#computed-计算属性" class="headerlink" title="computed 计算属性"></a>computed 计算属性</h2><p>同样是一种方法，但是会将计算好的值存储在内存中而不是重复执行，加快网站的运行效率。结果不经常变化的可以保存起来，没必要调用后端。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span> = <span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;currentTime1()&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;currentTime2&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="comment">&lt;!--使用计算属性的时候，我们--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    el: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line">    methods: &#123;</span><br><span class="line"><span class="javascript">      currentTime1: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="built_in">Date</span>.now();</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    computed:&#123;<span class="comment">//计算属性，不能与methods里面的方法重名，因为重名的话，会调用methods里面的方法</span></span></span><br><span class="line"><span class="javascript">      currentTime2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="built_in">Date</span>.now();</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="插槽-slot"><a href="#插槽-slot" class="headerlink" title="插槽 slot"></a>插槽 slot</h2><p>要注意一个问题：自己定义的component里面如果没有<slot></slot>的话，那么使用这个component的时候，<customized-component>content</customized-component>之间的所有content都将会被抛弃。</p>
<p>content可以是string，HTML代码，甚至其他组件。</p>
<p>这个Submit是我们绝大多数时候都会使用的，那我们就将其写到slot里面作为后备内容。如果我们使用这一个模版但是没提供slot里的值，将会直接使用默认的值。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="重要！"><a href="#重要！" class="headerlink" title="重要！"></a>重要！</h2><p>现在我们学的写在HTML里面的只是在学语法，而不是真正的vue文件的写法，真正的vue并不是在正常的html中加入vue package + script，因为这样并不方便</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$emit $on</span><br></pre></td></tr></table></figure>

<p>用于向parent component传递数据，而且是双向的传递</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>) <span class="comment">//意义等同于</span></span><br><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">&#x27;fs&#x27;</span> <span class="comment">//Vue中多这样写</span></span><br></pre></td></tr></table></figure>



      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/08/04/Vue-js-note/" data-id="ckdfdtzku00000vqv7e1q9hpn" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-AWS-ToysHub" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/03/AWS-ToysHub/" class="article-date">
  <time datetime="2020-08-03T06:36:14.000Z" itemprop="datePublished">2020-08-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/03/AWS-ToysHub/">AWS-ToysHub</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="How-to-commit-to-Github-via-AWS-Cloud9"><a href="#How-to-commit-to-Github-via-AWS-Cloud9" class="headerlink" title="How to commit to Github via AWS Cloud9?"></a>How to commit to Github via AWS Cloud9?</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br><span class="line">$ git add</span><br><span class="line">$ git commit -m</span><br><span class="line">$ git remote add origin https:&#x2F;&#x2F;github.com&#x2F;YuxuanZhao&#x2F;ToysHub.git &#x2F;&#x2F;need it at the first time</span><br><span class="line">$ git push -u origin master</span><br></pre></td></tr></table></figure>

<h2 id="MongoDB-Command-Line-Control"><a href="#MongoDB-Command-Line-Control" class="headerlink" title="MongoDB Command Line Control"></a>MongoDB Command Line Control</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mongo</span><br><span class="line">$ show dbs</span><br><span class="line">$ use toys_hub</span><br><span class="line">$ show collections</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">C $ db.toys.insert(&#123;name: &quot;Zaku II&quot;, description: &quot;blah&quot;&#125;) </span><br><span class="line">R $ db.toys.remove(&#123;name: &quot;Zaku II&quot;&#125;)</span><br><span class="line">U $ db.toys.update(&#123;name: &quot;Zaku II&quot;&#125;, &#123;$set: (name: &quot;Zaku III&quot;, description: &quot;blah blah&quot;)&#125;) </span><br><span class="line">D $ db.toys.find(&#123;name: &quot;Zaku II&quot;&#125;) </span><br></pre></td></tr></table></figure>


<h2 id="use-req-body-in-express-need-bodyParser"><a href="#use-req-body-in-express-need-bodyParser" class="headerlink" title="use req.body in express need bodyParser"></a>use req.body in express need bodyParser</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">&quot;body-parser&quot;</span>);</span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">true</span>&#125;));</span><br></pre></td></tr></table></figure>


<h2 id="use-Mongoose"><a href="#use-Mongoose" class="headerlink" title="use Mongoose"></a>use Mongoose</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose= <span class="built_in">require</span>(<span class="string">&quot;mongoose&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//connect to mongo database</span></span><br><span class="line">mongoose.connect(<span class="string">&quot;mongodb://localhost/toys_hub&quot;</span>, &#123;<span class="attr">useNewUrlParser</span>: <span class="literal">true</span>, <span class="attr">useUnifiedTopology</span>: <span class="literal">true</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//new toySchema</span></span><br><span class="line"><span class="keyword">var</span> toySchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">    name: <span class="built_in">String</span>,</span><br><span class="line">    picture: <span class="built_in">String</span>,</span><br><span class="line">    description: <span class="built_in">String</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//create model Toy to use all methods</span></span><br><span class="line"><span class="keyword">var</span> Toy = mongoose.model(<span class="string">&quot;Toy&quot;</span>, toySchema);</span><br><span class="line"></span><br><span class="line"><span class="comment">//create toy</span></span><br><span class="line">Toy.create(newToy, <span class="function"><span class="keyword">function</span>(<span class="params">err, newCreatedToy</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(err);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res.redirect(<span class="string">&quot;/toys&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Find all toys</span></span><br><span class="line">Toy.find(&#123;&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, toys</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err)&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(err);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          res.render(<span class="string">&quot;toys&quot;</span>, &#123;<span class="attr">toys</span>: toys&#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<p>use partials for footer and header</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- include (&#39;partials&#x2F;header&#39;) %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%- include (&#39;partials&#x2F;footer&#39;) %&gt;</span><br></pre></td></tr></table></figure>

<h2 id="HTML-tips"><a href="#HTML-tips" class="headerlink" title="HTML tips"></a>HTML tips</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">html &lt;head&gt;&lt;&#x2F;head&gt; need &lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class="line"></span><br><span class="line">src in &lt;img&gt; &quot;源&quot;，href in &lt;a&gt; “超链接”。</span><br></pre></td></tr></table></figure>

<h2 id="give-a-border-effect-to-picture"><a href="#give-a-border-effect-to-picture" class="headerlink" title="give a border effect to picture"></a>give a border effect to picture</h2><p>class = “thumbnail”<br>class = “caption”</p>
<h2 id="picture-align-affect-the-adaptive-screen-size"><a href="#picture-align-affect-the-adaptive-screen-size" class="headerlink" title="picture align (affect the adaptive screen size)"></a>picture align (affect the adaptive screen size)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">style &#x3D; &quot;display: flex; flex-warp: warp;&quot;</span><br></pre></td></tr></table></figure>

<h2 id="text-center-align"><a href="#text-center-align" class="headerlink" title="text center align"></a>text center align</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">class = &quot;text-center&quot;</span><br></pre></td></tr></table></figure>

<h2 id="margin"><a href="#margin" class="headerlink" title="margin"></a>margin</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">margin</span>: 70<span class="selector-tag">px</span> <span class="comment">/*up + down*/</span> <span class="selector-tag">auto</span> <span class="comment">/*left + right*/</span>;</span><br></pre></td></tr></table></figure>

<h2 id="form"><a href="#form" class="headerlink" title="form"></a>form</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;description&quot;</span>&gt;</span>Description<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span> = <span class="string">&quot;form-control&quot;</span> <span class="attr">type</span> = <span class="string">&quot;text&quot;</span> <span class="attr">name</span> = <span class="string">&quot;description&quot;</span> <span class="attr">placeholder</span> = <span class="string">&quot;Toy description&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="control-form"><a href="#control-form" class="headerlink" title="control form"></a>control form</h2><p>style = “width: 30%; margin: 0 auto;</p>
<h2 id="download-mongoose-with-specific-version"><a href="#download-mongoose-with-specific-version" class="headerlink" title="download mongoose with specific version"></a>download mongoose with specific version</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save mongoose@5.3.15</span><br></pre></td></tr></table></figure>

<h2 id="uninstall-mongoose"><a href="#uninstall-mongoose" class="headerlink" title="uninstall mongoose"></a>uninstall mongoose</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm uninstall mongoose;</span><br></pre></td></tr></table></figure>

<h2 id="delete-the-whole-collection"><a href="#delete-the-whole-collection" class="headerlink" title="delete the whole collection"></a>delete the whole collection</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ db.collection.drop();</span><br></pre></td></tr></table></figure>

<h2 id="export-model"><a href="#export-model" class="headerlink" title="export model"></a>export model</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = mongoose.model(<span class="string">&quot;Toy&quot;</span>, toySchema);</span><br></pre></td></tr></table></figure>

<h2 id="use-model"><a href="#use-model" class="headerlink" title="use model"></a>use model</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Toy = <span class="built_in">require</span>(<span class="string">&quot;./models/toy&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="delete-all-items-in-Toy，remove-is-out-of-date"><a href="#delete-all-items-in-Toy，remove-is-out-of-date" class="headerlink" title="delete all items in Toy，remove() is out of date"></a>delete all items in Toy，remove() is out of date</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Toy.deleteMany(&#123;&#125;, function(err)&#123;</span><br><span class="line">       if (err)&#123;</span><br><span class="line">           console.log(err);</span><br><span class="line">       &#125; else &#123;</span><br><span class="line">           console.log(&quot;Remove all Toys!&quot;);</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<h2 id="分左右两个栏目可以用这个"><a href="#分左右两个栏目可以用这个" class="headerlink" title="分左右两个栏目可以用这个"></a>分左右两个栏目可以用这个</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> = <span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> = <span class="string">&quot;col-md-9&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> = <span class="string">&quot;col-md-3&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="add-more-directory-excepts-views"><a href="#add-more-directory-excepts-views" class="headerlink" title="add more directory excepts views"></a>add more directory excepts views</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.static(__dirname + <span class="string">&quot;/public&quot;</span>));</span><br></pre></td></tr></table></figure>

<h2 id="references-in-header"><a href="#references-in-header" class="headerlink" title="references in header"></a>references in header</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span> = <span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span> = <span class="string">&quot;/stylesheets/main.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="install-user-authentication"><a href="#install-user-authentication" class="headerlink" title="install user authentication"></a>install user authentication</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install passport passport-local passport-local-mongoose express-session --save</span><br></pre></td></tr></table></figure>

<h2 id="before-using-user-authentication"><a href="#before-using-user-authentication" class="headerlink" title="before using user authentication"></a>before using user authentication</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> passport = <span class="built_in">require</span>(<span class="string">&quot;passport&quot;</span>),</span><br><span class="line">    localStrategy = <span class="built_in">require</span>(<span class="string">&quot;passport-local&quot;</span>),</span><br><span class="line">    User = <span class="built_in">require</span>(<span class="string">&quot;./models/user&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="links-for-navbar"><a href="#links-for-navbar" class="headerlink" title="links for navbar"></a>links for navbar</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="within-User-model"><a href="#within-User-model" class="headerlink" title="within User model"></a>within User model</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> passportLocalMongoose = <span class="built_in">require</span>(<span class="string">&quot;passport-local-mongoose&quot;</span>);</span><br><span class="line"><span class="comment">//Creating UserSchema here!</span></span><br><span class="line">UserSchema.plugin(passportLocalMongoose);</span><br></pre></td></tr></table></figure>

<h2 id="landing-slider"><a href="#landing-slider" class="headerlink" title="landing slider"></a>landing slider</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g nodemon</span><br><span class="line">$ nodemon app.js</span><br></pre></td></tr></table></figure>

<h2 id="register-user"><a href="#register-user" class="headerlink" title="register user"></a>register user</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">app.post(<span class="string">&quot;/register&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> newUser = <span class="keyword">new</span> User(&#123;<span class="attr">username</span>: req.body.username&#125;);</span><br><span class="line">    User.register(newUser, req.body.password, <span class="function"><span class="keyword">function</span>(<span class="params">err, user</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(err);</span><br><span class="line">            <span class="keyword">return</span> res.render(<span class="string">&quot;register&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            passport.authenticate(<span class="string">&quot;local&quot;</span>)(req, res, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                res.redirect(<span class="string">&quot;/campgrounds&quot;</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="user-login"><a href="#user-login" class="headerlink" title="user login"></a>user login</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.post(<span class="string">&quot;/login&quot;</span>, passport.authenticate(<span class="string">&quot;local&quot;</span>, &#123;<span class="attr">successRedirect</span>: <span class="string">&quot;/toys&quot;</span>, <span class="attr">failureRedirect</span>: <span class="string">&quot;/login&quot;</span>&#125;), <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123; </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Check-whether-it-is-login-middleware"><a href="#Check-whether-it-is-login-middleware" class="headerlink" title="Check whether it is login middleware"></a>Check whether it is login middleware</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isLoggedIn</span>(<span class="params">req, res, next</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (req.isAuthenticated())&#123;</span><br><span class="line">        <span class="keyword">return</span> next();</span><br><span class="line">    &#125;</span><br><span class="line">    res.redirect(<span class="string">&quot;/login&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="use-a-middleware-for-all-route-getting-currentUser"><a href="#use-a-middleware-for-all-route-getting-currentUser" class="headerlink" title="use a middleware for all route getting currentUser"></a>use a middleware for all route getting currentUser</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>)</span>&#123;</span><br><span class="line">    res.locals.currentUser = req.user;</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (!currentUser)&#123; %&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Route-Refactoring"><a href="#Route-Refactoring" class="headerlink" title="Route Refactoring"></a>Route Refactoring</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> commentRoutes = <span class="built_in">require</span>(<span class="string">&quot;./routes/comments&quot;</span>),</span><br><span class="line">    toyRoutes   = <span class="built_in">require</span>(<span class="string">&quot;./routes/toys&quot;</span>),</span><br><span class="line">    indexRoutes  = <span class="built_in">require</span>(<span class="string">&quot;./routes/index&quot;</span>);</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">&quot;/&quot;</span>, indexRoutes);</span><br><span class="line">app.use(<span class="string">&quot;/toys&quot;</span>, toyRoutes);</span><br><span class="line">app.use(<span class="string">&quot;/toys/:id/comment&quot;</span>, commentRoutes);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>),</span><br><span class="line">    router  = express.Router(&#123;<span class="attr">mergeParams</span>: <span class="literal">true</span>&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="update-author-in-comment"><a href="#update-author-in-comment" class="headerlink" title="update author in comment"></a>update author in comment</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> commentSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">    author: &#123;</span><br><span class="line">        id: &#123;</span><br><span class="line">            type: mongoose.Schema.Types.ObjectId,</span><br><span class="line">            ref: <span class="string">&quot;User&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        username: <span class="built_in">String</span></span><br><span class="line">    &#125;,</span><br><span class="line">    content: <span class="built_in">String</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newComment = &#123;</span><br><span class="line">    author: &#123;</span><br><span class="line">        id: req.user._id,</span><br><span class="line">        username: req.user.username</span><br><span class="line">    &#125;,</span><br><span class="line">    content: req.body.content</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="use-PUT"><a href="#use-PUT" class="headerlink" title="use PUT"></a>use PUT</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install method-override --save</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> methodOverride = <span class="built_in">require</span>(<span class="string">&quot;method-override&quot;</span>);</span><br><span class="line"></span><br><span class="line">app.use(methodOverride(<span class="string">&quot;_method&quot;</span>));</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span> = <span class="string">&quot;/toys/&lt;%= toy._id %&gt;/edit?_method=PUT&quot;</span> <span class="attr">method</span> = <span class="string">&quot;POST&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Update-toy-route"><a href="#Update-toy-route" class="headerlink" title="Update toy route"></a>Update toy route</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">router.put(<span class="string">&quot;/:id&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    Toy.findOneAndUpdate(&#123;<span class="attr">_id</span>: req.params.id&#125;, req.body.toy, &#123;<span class="attr">upsert</span>: <span class="literal">true</span>, <span class="attr">useFindAndModify</span>: <span class="literal">false</span>&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, updatedToy</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(err);</span><br><span class="line">            res.redirect(<span class="string">&quot;/toys&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res.redirect(<span class="string">&quot;/toys/&quot;</span> + req.params.id);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Destroy toy route</span></span><br><span class="line">router.delete(<span class="string">&quot;/:id&quot;</span>, checkToyOwnership, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    Toy.findByIdAndRemove(req.params.id, &#123;<span class="attr">useFindAndModify</span>: <span class="literal">false</span>&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err)&#123;</span><br><span class="line">            res.redirect(<span class="string">&quot;/toys&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res.redirect(<span class="string">&quot;/toys&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span> = <span class="string">&quot;/toys/&lt;%= toy._id %&gt;/comment/&lt;%= comment._id %&gt;?_method=DELETE&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span> <span class="attr">style</span> = <span class="string">&quot;display: inline&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span> = <span class="string">&quot;btn btn-danger&quot;</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="User-Authorization"><a href="#User-Authorization" class="headerlink" title="User Authorization"></a>User Authorization</h2><p>already login, check permission</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkToyOwnership</span>(<span class="params">req, res, next</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (req.isAuthenticated())&#123;</span><br><span class="line">        Toy.findById(req.params.id, <span class="function"><span class="keyword">function</span>(<span class="params">err, toy</span>)</span>&#123;</span><br><span class="line">           <span class="keyword">if</span> (err)&#123;</span><br><span class="line">               res.redirect(<span class="string">&quot;/toys&quot;</span>);</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="keyword">if</span> (toy.author.id.equals(req.user._id))&#123;</span><br><span class="line">                    next();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                   <span class="built_in">console</span>.log(<span class="string">&quot;You don&#x27;t have permission&quot;</span>);</span><br><span class="line">                    res.redirect(<span class="string">&quot;back&quot;</span>);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;need to login first&quot;</span>);</span><br><span class="line">        res.redirect(<span class="string">&quot;back&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="auto-hide-button-not-belong-to-you"><a href="#auto-hide-button-not-belong-to-you" class="headerlink" title="auto hide button not belong to you"></a>auto hide button not belong to you</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (currentUser &amp;&amp; toy.author.id.equals(currentUser._id))&#123; %&gt;</span><br><span class="line">        &lt;form class &#x3D; &quot;delete-form&quot; action &#x3D; &quot;&#x2F;toys&#x2F;&lt;%&#x3D; toy._id %&gt;&#x2F;edit&quot; method&#x3D;&quot;GET&quot;&gt;</span><br><span class="line">              &lt;button class &#x3D; &quot;btn btn-warning&quot;&gt;Edit&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;&#x2F;form&gt;</span><br><span class="line">        &lt;form class &#x3D; &quot;delete-form&quot; action &#x3D; &quot;&#x2F;toys&#x2F;&lt;%&#x3D; toy._id %&gt;?_method&#x3D;DELETE&quot; method&#x3D;&quot;POST&quot;&gt;</span><br><span class="line">              &lt;button class &#x3D; &quot;btn btn-danger&quot;&gt;Delete&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;&#x2F;form&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>

<h2 id="connect-flash"><a href="#connect-flash" class="headerlink" title="connect-flash"></a>connect-flash</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save connect-flash</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> flash = <span class="built_in">require</span>(<span class="string">&quot;connect-flash&quot;</span>);</span><br><span class="line"></span><br><span class="line">app.use(flash());</span><br><span class="line"></span><br><span class="line">req.flash(<span class="string">&quot;error&quot;</span>, <span class="string">&quot;Please Login First!&quot;</span>); <span class="comment">//before redirect</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (error &amp;&amp; error.length &gt; 0)&#123; %&gt;</span><br><span class="line">        &lt;div class &#x3D; &quot;alert alert-danger&quot; role &#x3D; &quot;alert&quot;&gt;&lt;%&#x3D; error %&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;% &#125; else if (success &amp;&amp; success.length &gt; 0) &#123; %&gt;</span><br><span class="line">        &lt;div class &#x3D; &quot;alert alert-success&quot; role &#x3D; &quot;alert&quot;&gt;&lt;%&#x3D; success %&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (err)&#123;</span><br><span class="line">      req.flash(<span class="string">&quot;error&quot;</span>, err.message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/08/03/AWS-ToysHub/" data-id="ckde5fodl0000fiqv6bqsci67" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Hexo Tutorial" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/03/Hexo%20Tutorial/" class="article-date">
  <time datetime="2020-08-03T03:55:24.000Z" itemprop="datePublished">2020-08-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/03/Hexo%20Tutorial/">How to build a Hexo blog to Github via AWS Cloud9</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Build-the-hexo-blog-in-AWS-Cloud9-firstly"><a href="#Build-the-hexo-blog-in-AWS-Cloud9-firstly" class="headerlink" title="Build the hexo blog in AWS Cloud9 firstly"></a>Build the hexo blog in AWS Cloud9 firstly</h2><ol>
<li>Create a Cloud9 instance in AWS</li>
<li>$ hexo new “My New Post”</li>
<li>$ hexo init</li>
<li>$ npm install</li>
<li>$ npm install hexo-server –save</li>
<li>$ hexo server</li>
</ol>
<h2 id="Deploy-it-to-the-Github"><a href="#Deploy-it-to-the-Github" class="headerlink" title="Deploy it to the Github"></a>Deploy it to the Github</h2><ol>
<li>Create a new repositoy “<username>.github.io”</li>
<li>$ npm install hexo-deployer-git –save</li>
<li>Change the “_config.yml”<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:yuxuanzhao/yuxuanzhao.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure></li>
<li>$ ssh-keygen -t rsa</li>
<li>Copy public key to Github SSH setting </li>
<li>$ ssh -T <a href="mailto:&#x67;&#x69;&#116;&#64;&#x67;&#105;&#x74;&#104;&#x75;&#x62;&#46;&#99;&#111;&#109;">&#x67;&#x69;&#116;&#64;&#x67;&#105;&#x74;&#104;&#x75;&#x62;&#46;&#99;&#111;&#109;</a> //validate the connection</li>
</ol>
<h2 id="Commit-to-Github"><a href="#Commit-to-Github" class="headerlink" title="Commit to Github"></a>Commit to Github</h2><ol>
<li>$ hexo clean //not necessary</li>
<li>$ hexo g</li>
<li>$ hexo d</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/08/03/Hexo%20Tutorial/" data-id="ckde5fods0001fiqv3x8s3s1c" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/08/07/frontend-interview-Q-A/">frontend interview Q&amp;A</a>
          </li>
        
          <li>
            <a href="/2020/08/04/BackEnd-notes/">BackEnd notes</a>
          </li>
        
          <li>
            <a href="/2020/08/04/FrontEnd-notes/">FrontEnd notes</a>
          </li>
        
          <li>
            <a href="/2020/08/04/Vue-js-note/">Vue.js note</a>
          </li>
        
          <li>
            <a href="/2020/08/03/AWS-ToysHub/">AWS-ToysHub</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Eason Chiu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>